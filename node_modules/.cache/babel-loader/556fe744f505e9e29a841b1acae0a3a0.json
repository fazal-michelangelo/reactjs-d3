{"ast":null,"code":"var _jsxFileName = \"/Users/fazal/Documents/NETMONASTERY/reactjs-d3/src/LineAreaChart3.js\";\n\n/* eslint-disable no-unused-expressions */\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport './lineAreaChart.css';\n\nconst moment = require('moment');\n\nconst BollingerBands = props => {\n  useEffect(() => {\n    drawChart();\n  });\n\n  function drawChart() {\n    var div = d3.select(\"body\").append(\"div\").attr(\"class\", \"dnif_timeline-tooltip\").style(\"opacity\", 0);\n    var fables = props.getData;\n    var markerData = [{\n      \"date\": \"2014-08-06\",\n      \"type\": \"Client\",\n      \"version\": \"2.0\"\n    }, {\n      \"date\": \"2014-08-20\",\n      \"type\": \"Client\",\n      \"version\": \"2.1\"\n    }, {\n      \"date\": \"2014-08-27\",\n      \"type\": \"Server\",\n      \"version\": \"3.5\"\n    }, {\n      \"date\": \"2014-09-03\",\n      \"type\": \"Client\",\n      \"version\": \"2.2\"\n    }];\n\n    function addAxesAndLegend(svg, xAxis, yAxis, margin, chartWidth, chartHeight) {\n      var legendWidth = 200,\n          legendHeight = 100; // clipping to make sure nothing appears behind legend\n\n      svg.append('clipPath').attr('id', 'axes-clip').append('polygon').attr('points', -margin.left + ',' + -margin.top + ' ' + (chartWidth - legendWidth - 1) + ',' + -margin.top + ' ' + (chartWidth - legendWidth - 1) + ',' + legendHeight + ' ' + (chartWidth + margin.right) + ',' + legendHeight + ' ' + (chartWidth + margin.right) + ',' + (chartHeight + margin.bottom) + ' ' + -margin.left + ',' + (chartHeight + margin.bottom));\n      var axes = svg.append('g').attr('clip-path', 'url(#axes-clip)');\n      axes.append('g').attr('class', 'x axis').attr('transform', 'translate(0,' + chartHeight + ')').call(xAxis);\n      axes.append('g').attr('class', 'y axis').call(yAxis).append('text').attr('transform', 'rotate(-90)').attr('y', 6).attr('dy', '.71em').style('text-anchor', 'end'); // .text('Time (s)');\n      //           svg.append(\"text\")             \n      //   .attr(\"transform\",\n      //         \"translate(\" + (chartWidth/2) + \" ,\" + \n      //                        (chartHeight + margin.top + 20) + \")\")\n      //   .style(\"text-anchor\", \"middle\")\n      //   .text(\"time\");\n      //   svg.append(\"text\")\n      //   .attr(\"transform\", \"rotate(-90)\")\n      //   .attr(\"y\", 0 - margin.left)\n      //   .attr(\"x\",0 - (chartHeight / 2))\n      //   .attr(\"dy\", \"1em\")\n      //   .style('font-size', '12px')\n      //   .style(\"text-anchor\", \"middle\")\n      //   .text(\"frequency\");      \n\n      var legend = svg.append('g').attr('class', 'legend').attr('transform', 'translate(' + (chartWidth - legendWidth) + ', 100)');\n      legend.append('rect').attr('class', 'legend-bg').attr('width', legendWidth).attr('height', legendHeight);\n      legend.append('rect').attr('class', 'outer').attr('width', 75).attr('height', 20).attr('x', 10).attr('y', 10);\n      legend.append('text').attr('x', 115).attr('y', 25).text('5% - 95%');\n      legend.append('rect').attr('class', 'inner').attr('width', 75).attr('height', 20).attr('x', 10).attr('y', 40);\n      legend.append('text').attr('x', 115).attr('y', 55).text('25% - 75%');\n      legend.append('path').attr('class', 'median-line').attr('d', 'M10,80L85,80');\n      legend.append('text').attr('x', 115).attr('y', 85).text('Median');\n    }\n\n    function drawPaths(svg, data, x, y) {\n      var upperOuterArea = d3.area().curve(d3.curveBasis) // .interpolate('basis')\n      .x(function (d) {\n        return x(d.date) || 1;\n      }).y0(function (d) {\n        return y(d.upper);\n      }).y1(function (d) {\n        return y(d.pct75);\n      });\n      var upperInnerArea = d3.area().curve(d3.curveBasis) // .interpolate('basis')\n      .x(function (d) {\n        return x(d.date) || 1;\n      }).y0(function (d) {\n        return y(d.pct75);\n      }).y1(function (d) {\n        return y(d.current);\n      });\n      var medianLine = d3.line().curve(d3.curveLinear) // .interpolate('basis')\n      .x(function (d) {\n        return x(d.date);\n      }).y(function (d) {\n        return y(d.current);\n      });\n      var lowerInnerArea = d3.area().curve(d3.curveBasis) // .interpolate('basis')\n      .x(function (d) {\n        return x(d.date) || 1;\n      }).y0(function (d) {\n        return y(d.current);\n      }).y1(function (d) {\n        return y(d.pct25);\n      });\n      var lowerOuterArea = d3.area().curve(d3.curveLinear) // .interpolate('basis')\n      .x(function (d) {\n        return x(d.date) || 1;\n      }).y0(function (d) {\n        return y(d.upper);\n      }).y1(function (d) {\n        return y(d.lower);\n      });\n      svg.datum(data); // svg.append('path')\n      //   .attr('class', 'area upper outer')\n      //   .attr('d', upperOuterArea)\n      //   .attr('clip-path', 'url(#rect-clip)');\n\n      svg.append('path').attr('class', 'area lower outer').attr('d', lowerOuterArea).attr('clip-path', 'url(#rect-clip)'); // svg.append('path')\n      //   .attr('class', 'area upper inner')\n      //   .attr('d', upperInnerArea)\n      //   .attr('clip-path', 'url(#rect-clip)');\n      // svg.append('path')\n      //   .attr('class', 'area lower inner')\n      //   .attr('d', lowerInnerArea)\n      //   .attr('clip-path', 'url(#rect-clip)');\n\n      svg.append('path').attr('class', 'median-line').attr('d', medianLine).attr('clip-path', 'url(#rect-clip)');\n      svg.selectAll(\"dot\").data(data).enter().append(\"circle\").attr(\"class\", \"dot\").attr(\"r\", 5).attr(\"cx\", function (d) {\n        return x(d.date);\n      }).attr(\"cy\", function (d) {\n        return y(d.current);\n      }).style('fill', function (d) {\n        if (d.current > d.upper) {\n          return \"red\";\n        } else {\n          return \"none\";\n        }\n      }).on(\"mouseover\", function (d) {\n        div.transition().duration(200).style(\"opacity\", .9);\n        div.html('user count' + \"<br/>\" + d.current).style(\"left\", d3.event.pageX + \"px\").style(\"top\", d3.event.pageY - 28 + \"px\");\n      }).on(\"mouseout\", function (d) {\n        div.transition().duration(500).style(\"opacity\", 0);\n      });\n    }\n\n    function addMarker(marker, svg, chartHeight, x) {\n      var radius = 32,\n          xPos = x(marker.date) - radius - 3,\n          yPosStart = chartHeight - radius - 3,\n          yPosEnd = (marker.type === 'Client' ? 80 : 160) + radius - 3;\n      var markerG = svg.append('g').attr('class', 'marker ' + marker.type.toLowerCase()).attr('transform', 'translate(' + xPos + ', ' + yPosStart + ')').attr('opacity', 0);\n      markerG.transition().duration(1000).attr('transform', 'translate(' + xPos + ', ' + yPosEnd + ')').attr('opacity', 1);\n      markerG.append('path').attr('d', 'M' + radius + ',' + (chartHeight - yPosStart) + 'L' + radius + ',' + (chartHeight - yPosStart)).transition().duration(1000).attr('d', 'M' + radius + ',' + (chartHeight - yPosEnd) + 'L' + radius + ',' + radius * 2);\n      markerG.append('circle').attr('class', 'marker-bg').attr('cx', radius).attr('cy', radius).attr('r', radius);\n      markerG.append('text').attr('x', radius).attr('y', radius * 0.9).text(marker.type);\n      markerG.append('text').attr('x', radius).attr('y', radius * 1.5).text(marker.version);\n    }\n\n    function startTransitions(svg, chartWidth, chartHeight, rectClip, markers, x) {\n      rectClip // .transition()\n      //   .duration(1000 * markers.length)\n      .attr('width', chartWidth);\n      markers.forEach(function (marker, i) {\n        setTimeout(function () {\n          addMarker(marker, svg, chartHeight, x);\n        }, 1000 + 500 * i);\n      });\n      var y = d3.scaleLinear().range([chartHeight, 0]).domain([0, d3.max(data, function (d) {\n        return d.upper;\n      })]);\n      var parseDate = d3.timeParse(\"%Y-%m-%d\"); // gridlines in y axis function\n\n      function make_y_gridlines() {\n        return d3.axisLeft(y); // .ticks(5)\n      }\n\n      svg.append(\"g\").attr(\"class\", \"grid\").call(make_y_gridlines().tickSize(-chartWidth).tickFormat(\"\"));\n    }\n\n    function makeChart(data, markers) {\n      var svgWidth = 960,\n          svgHeight = 500,\n          margin = {\n        top: 20,\n        right: 20,\n        bottom: 40,\n        left: 40\n      },\n          chartWidth = svgWidth - margin.left - margin.right,\n          chartHeight = svgHeight - margin.top - margin.bottom; // var x = d3.time.scale().range([0, chartWidth])\n\n      var x = d3.scaleTime().domain([new Date('2020-04-15T19:00:00.000Z'), new Date('2020-04-23T18:15:00.000Z')]).range([0, 700]); // var x = d3.scaleTime().range([0, chartWidth])\n      //   .domain(d3.extent(data, function (d) { return d.date; })),\n\n      var y = d3.scaleLinear().range([chartHeight, 0]).domain([0, d3.max(data, function (d) {\n        return d.current;\n      })]); // var xAxis = d3.svg.axis().scale(x).orient('bottom')\n\n      var xAxis = d3.axisBottom(x); // .tickSize(-chartHeight).outerTickSize(0).tickPadding(10),\n      // yAxis = d3.svg.axis().scale(y).orient('left')\n\n      var yAxis = d3.axisLeft(y).ticks(20).tickFormat(d3.format(\".1s\")); // .tickFormat(d3.formatPrefix(\".1\", 2e5));\n      // .innerTickSize(-chartWidth).outerTickSize(0).tickPadding(10);\n\n      var svg = d3.select('body').append('svg').attr('width', svgWidth).attr('height', svgHeight).append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')'); // clipping to start chart hidden and slide it in later\n\n      var rectClip = svg.append('clipPath').attr('id', 'rect-clip').append('rect').attr('width', 0).attr('height', chartHeight);\n      addAxesAndLegend(svg, xAxis, yAxis, margin, chartWidth, chartHeight);\n      drawPaths(svg, data, x, y);\n      startTransitions(svg, chartWidth, chartHeight, rectClip, markers, x);\n    } // var parseDate = d3.time.format('%Y-%m-%d').parse;\n\n\n    var parseDate = d3.timeParse(\"%Y-%m-%d\"); // var data = fables.map(function (d) {\n    //   return {\n    //     date: parseDate(d.date),\n    //     lower: d.lower / 1,\n    //     pct25: d.pct25 / 1,\n    //     current: d.current / 1,\n    //     pct75: d.pct75 / 1,\n    //     upper: d.upper / 1\n    //   };\n    // });\n\n    var data = fables.map(function (d) {\n      return {\n        date: new Date(d.date),\n        lower: d.lower / 1,\n        pct25: d.pct25 / 1,\n        current: d.current / 1,\n        pct75: d.pct75 / 1,\n        upper: d.upper / 1\n      };\n    });\n    console.log(data);\n    var markers = markerData.map(function (marker) {\n      return {\n        date: new Date(marker.date),\n        type: marker.type,\n        version: marker.version\n      };\n    });\n    makeChart(data, markers);\n  }\n\n  const d3Container = useRef(null);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dnif_line_area-chart\",\n    width: 996,\n    height: 444,\n    ref: d3Container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default BollingerBands;","map":{"version":3,"sources":["/Users/fazal/Documents/NETMONASTERY/reactjs-d3/src/LineAreaChart3.js"],"names":["React","useRef","useEffect","d3","moment","require","BollingerBands","props","drawChart","div","select","append","attr","style","fables","getData","markerData","addAxesAndLegend","svg","xAxis","yAxis","margin","chartWidth","chartHeight","legendWidth","legendHeight","left","top","right","bottom","axes","call","legend","text","drawPaths","data","x","y","upperOuterArea","area","curve","curveBasis","d","date","y0","upper","y1","pct75","upperInnerArea","current","medianLine","line","curveLinear","lowerInnerArea","pct25","lowerOuterArea","lower","datum","selectAll","enter","on","transition","duration","html","event","pageX","pageY","addMarker","marker","radius","xPos","yPosStart","yPosEnd","type","markerG","toLowerCase","version","startTransitions","rectClip","markers","forEach","i","setTimeout","scaleLinear","range","domain","max","parseDate","timeParse","make_y_gridlines","axisLeft","tickSize","tickFormat","makeChart","svgWidth","svgHeight","scaleTime","Date","axisBottom","ticks","format","map","console","log","d3Container"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-expressions */\n\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport './lineAreaChart.css';\nconst moment = require('moment');\n\n\nconst BollingerBands = (props) => {\n    useEffect(() => {\n        drawChart();\n    });\n\n    function drawChart() {\n\n\n\n    var div = d3.select(\"body\").append(\"div\")\n    .attr(\"class\", \"dnif_timeline-tooltip\")\t\t\t\t\n    .style(\"opacity\", 0);\n\n    var fables = props.getData;\n\n      \n      var markerData = \n      [\n        {\n          \"date\": \"2014-08-06\",\n          \"type\": \"Client\",\n          \"version\": \"2.0\"\n        },\n        {\n          \"date\": \"2014-08-20\",\n          \"type\": \"Client\",\n          \"version\": \"2.1\"\n        },\n        {\n          \"date\": \"2014-08-27\",\n          \"type\": \"Server\",\n          \"version\": \"3.5\"\n        },\n        {\n          \"date\": \"2014-09-03\",\n          \"type\": \"Client\",\n          \"version\": \"2.2\"\n        }\n      ]\n      \n      \n          function addAxesAndLegend(svg, xAxis, yAxis, margin, chartWidth, chartHeight) {\n            var legendWidth = 200,\n              legendHeight = 100;\n      \n            // clipping to make sure nothing appears behind legend\n            svg.append('clipPath')\n              .attr('id', 'axes-clip')\n              .append('polygon')\n              .attr('points', (-margin.left) + ',' + (-margin.top) + ' ' +\n                (chartWidth - legendWidth - 1) + ',' + (-margin.top) + ' ' +\n                (chartWidth - legendWidth - 1) + ',' + legendHeight + ' ' +\n                (chartWidth + margin.right) + ',' + legendHeight + ' ' +\n                (chartWidth + margin.right) + ',' + (chartHeight + margin.bottom) + ' ' +\n                (-margin.left) + ',' + (chartHeight + margin.bottom));\n      \n\n\n\n            var axes = svg.append('g')\n              .attr('clip-path', 'url(#axes-clip)');\n      \n            axes.append('g')\n              .attr('class', 'x axis')\n              .attr('transform', 'translate(0,' + chartHeight + ')')\n              .call(xAxis);\n      \n            axes.append('g')\n              .attr('class', 'y axis')\n              .call(yAxis)\n              .append('text')\n              .attr('transform', 'rotate(-90)')\n              .attr('y', 6)\n              .attr('dy', '.71em')\n              .style('text-anchor', 'end')\n              // .text('Time (s)');\n\n\n    //           svg.append(\"text\")             \n    //   .attr(\"transform\",\n    //         \"translate(\" + (chartWidth/2) + \" ,\" + \n    //                        (chartHeight + margin.top + 20) + \")\")\n    //   .style(\"text-anchor\", \"middle\")\n    //   .text(\"time\");\n\n\n    //   svg.append(\"text\")\n    //   .attr(\"transform\", \"rotate(-90)\")\n    //   .attr(\"y\", 0 - margin.left)\n    //   .attr(\"x\",0 - (chartHeight / 2))\n    //   .attr(\"dy\", \"1em\")\n    //   .style('font-size', '12px')\n    //   .style(\"text-anchor\", \"middle\")\n    //   .text(\"frequency\");      \n\n\n\n      \n            var legend = svg.append('g')\n              .attr('class', 'legend')\n              .attr('transform', 'translate(' + (chartWidth - legendWidth) + ', 100)');\n      \n            legend.append('rect')\n              .attr('class', 'legend-bg')\n              .attr('width', legendWidth)\n              .attr('height', legendHeight);\n      \n            legend.append('rect')\n              .attr('class', 'outer')\n              .attr('width', 75)\n              .attr('height', 20)\n              .attr('x', 10)\n              .attr('y', 10);\n      \n            legend.append('text')\n              .attr('x', 115)\n              .attr('y', 25)\n              .text('5% - 95%');\n      \n            legend.append('rect')\n              .attr('class', 'inner')\n              .attr('width', 75)\n              .attr('height', 20)\n              .attr('x', 10)\n              .attr('y', 40);\n      \n            legend.append('text')\n              .attr('x', 115)\n              .attr('y', 55)\n              .text('25% - 75%');\n      \n            legend.append('path')\n              .attr('class', 'median-line')\n              .attr('d', 'M10,80L85,80');\n      \n            legend.append('text')\n              .attr('x', 115)\n              .attr('y', 85)\n              .text('Median');\n          }\n      \n          function drawPaths(svg, data, x, y) {\n            var upperOuterArea = d3.area()\n              .curve(d3.curveBasis)\n              // .interpolate('basis')\n              .x(function (d) { return x(d.date) || 1; })\n              .y0(function (d) { return y(d.upper); })\n              .y1(function (d) { return y(d.pct75); });\n      \n            var upperInnerArea = d3.area()\n              .curve(d3.curveBasis)\n              // .interpolate('basis')\n              .x(function (d) { return x(d.date) || 1; })\n              .y0(function (d) { return y(d.pct75); })\n              .y1(function (d) { return y(d.current); });\n      \n            var medianLine = d3.line()\n              .curve(d3.curveLinear)\n              // .interpolate('basis')\n              .x(function (d) { return x(d.date); })\n              .y(function (d) { return y(d.current); });\n      \n            var lowerInnerArea = d3.area()\n              .curve(d3.curveBasis)\n              // .interpolate('basis')\n              .x(function (d) { return x(d.date) || 1; })\n              .y0(function (d) { return y(d.current); })\n              .y1(function (d) { return y(d.pct25); });\n      \n            var lowerOuterArea = d3.area()\n              .curve(d3.curveLinear)\n              // .interpolate('basis')\n              .x(function (d) { return x(d.date) || 1; })\n              .y0(function (d) { return y(d.upper); })\n              .y1(function (d) { return y(d.lower); });\n      \n            svg.datum(data);\n      \n            // svg.append('path')\n            //   .attr('class', 'area upper outer')\n            //   .attr('d', upperOuterArea)\n            //   .attr('clip-path', 'url(#rect-clip)');\n      \n            svg.append('path')\n              .attr('class', 'area lower outer')\n              .attr('d', lowerOuterArea)\n              .attr('clip-path', 'url(#rect-clip)');\n      \n            // svg.append('path')\n            //   .attr('class', 'area upper inner')\n            //   .attr('d', upperInnerArea)\n            //   .attr('clip-path', 'url(#rect-clip)');\n      \n            // svg.append('path')\n            //   .attr('class', 'area lower inner')\n            //   .attr('d', lowerInnerArea)\n            //   .attr('clip-path', 'url(#rect-clip)');\n      \n            svg.append('path')\n              .attr('class', 'median-line')\n              .attr('d', medianLine)\n              .attr('clip-path', 'url(#rect-clip)');\n\n\n\n\n              svg.selectAll(\"dot\")\n              .data(data)\n              .enter().append(\"circle\")\n              .attr(\"class\", \"dot\")\n              .attr(\"r\",5)\n              .attr(\"cx\", function(d) { return x(d.date); })\n              .attr(\"cy\", function(d) { return y(d.current); })\n  \n              .style('fill', function(d) {\n                  if(d.current > d.upper) { return \"red\"}\n                  else {return \"none\"}\n              })\n            \n              .on(\"mouseover\", function(d) {\t\t\n                  div.transition()\t\t\n                      .duration(200)\t\t\n                      .style(\"opacity\", .9);\t\t\n                  div.html('user count' + \"<br/>\"  + d.current)\t\n                      .style(\"left\", (d3.event.pageX) + \"px\")\t\t\n                      .style(\"top\", (d3.event.pageY - 28) + \"px\");\t\n                  })\t\t\t\t\t\n              .on(\"mouseout\", function(d) {\t\t\n                  div.transition()\t\t\n                      .duration(500)\t\t\n                      .style(\"opacity\", 0);\t\n              });\n\n\n          }\n      \n          function addMarker(marker, svg, chartHeight, x) {\n            var radius = 32,\n              xPos = x(marker.date) - radius - 3,\n              yPosStart = chartHeight - radius - 3,\n              yPosEnd = (marker.type === 'Client' ? 80 : 160) + radius - 3;\n      \n            var markerG = svg.append('g')\n              .attr('class', 'marker ' + marker.type.toLowerCase())\n              .attr('transform', 'translate(' + xPos + ', ' + yPosStart + ')')\n              .attr('opacity', 0);\n      \n            markerG.transition()\n              .duration(1000)\n              .attr('transform', 'translate(' + xPos + ', ' + yPosEnd + ')')\n              .attr('opacity', 1);\n      \n            markerG.append('path')\n              .attr('d', 'M' + radius + ',' + (chartHeight - yPosStart) + 'L' + radius + ',' + (chartHeight - yPosStart))\n              .transition()\n              .duration(1000)\n              .attr('d', 'M' + radius + ',' + (chartHeight - yPosEnd) + 'L' + radius + ',' + (radius * 2));\n      \n            markerG.append('circle')\n              .attr('class', 'marker-bg')\n              .attr('cx', radius)\n              .attr('cy', radius)\n              .attr('r', radius);\n      \n            markerG.append('text')\n              .attr('x', radius)\n              .attr('y', radius * 0.9)\n              .text(marker.type);\n      \n            markerG.append('text')\n              .attr('x', radius)\n              .attr('y', radius * 1.5)\n              .text(marker.version);\n          }\n      \n          function startTransitions(svg, chartWidth, chartHeight, rectClip, markers, x) {\n            rectClip\n            // .transition()\n            //   .duration(1000 * markers.length)\n              .attr('width', chartWidth);\n      \n            markers.forEach(function (marker, i) {\n              setTimeout(function () {\n                addMarker(marker, svg, chartHeight, x);\n              }, 1000 + 500 * i);\n            });\n\n\n\n  \n\n\n            var y = d3.scaleLinear()\n            .range([chartHeight, 0])\n            .domain([0, d3.max(data, function (d) { return d.upper; })]);\n\n\n\n            var parseDate = d3.timeParse(\"%Y-%m-%d\");\n            \n      \n        \n\n\n         \n\n\n\n                \n\n            // gridlines in y axis function\n            function make_y_gridlines() {\t\t\n                return d3.axisLeft(y)\n                    // .ticks(5)\n            }\n\n\n            svg.append(\"g\")\t\t\t\n            .attr(\"class\", \"grid\")\n            .call(make_y_gridlines()\n                .tickSize(-chartWidth)\n                .tickFormat(\"\")\n            )\n\n\n          }\n      \n          function makeChart(data, markers) {\n            var svgWidth = 960,\n              svgHeight = 500,\n              margin = { top: 20, right: 20, bottom: 40, left: 40 },\n              chartWidth = svgWidth - margin.left - margin.right,\n              chartHeight = svgHeight - margin.top - margin.bottom;\n      \n            // var x = d3.time.scale().range([0, chartWidth])\n      \n            var x = d3.scaleTime()\n            .domain([new Date('2020-04-15T19:00:00.000Z'), new Date('2020-04-23T18:15:00.000Z')])\n              .range([0, 700]);\n          \n          \n\n            // var x = d3.scaleTime().range([0, chartWidth])\n            //   .domain(d3.extent(data, function (d) { return d.date; })),\n\n              var y = d3.scaleLinear().range([chartHeight, 0])\n                .domain([0, d3.max(data, function (d) { return d.current; })]);\n      \n            // var xAxis = d3.svg.axis().scale(x).orient('bottom')\n            var xAxis = d3.axisBottom(x);\n              // .tickSize(-chartHeight).outerTickSize(0).tickPadding(10),\n      \n      \n              // yAxis = d3.svg.axis().scale(y).orient('left')\n      \n              var yAxis = d3.axisLeft(y)\n                .ticks(20)\n                .tickFormat(d3.format(\".1s\"))\n                // .tickFormat(d3.formatPrefix(\".1\", 2e5));\n              \n                // .innerTickSize(-chartWidth).outerTickSize(0).tickPadding(10);\n      \n            var svg = d3.select('body').append('svg')\n              .attr('width', svgWidth)\n              .attr('height', svgHeight)\n              .append('g')\n              .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n      \n            // clipping to start chart hidden and slide it in later\n            var rectClip = svg.append('clipPath')\n              .attr('id', 'rect-clip')\n              .append('rect')\n              .attr('width', 0)\n              .attr('height', chartHeight);\n      \n            addAxesAndLegend(svg, xAxis, yAxis, margin, chartWidth, chartHeight);\n            drawPaths(svg, data, x, y);\n            startTransitions(svg, chartWidth, chartHeight, rectClip, markers, x);\n          }\n      \n          // var parseDate = d3.time.format('%Y-%m-%d').parse;\n          var parseDate = d3.timeParse(\"%Y-%m-%d\");\n      \n            \n      \n            // var data = fables.map(function (d) {\n            //   return {\n            //     date: parseDate(d.date),\n            //     lower: d.lower / 1,\n            //     pct25: d.pct25 / 1,\n            //     current: d.current / 1,\n            //     pct75: d.pct75 / 1,\n            //     upper: d.upper / 1\n            //   };\n            // });\n\n\n \n\n\n\n            var data = fables.map(function (d) {\n                return {\n                  date: new Date(d.date),\n                  lower: d.lower / 1,\n                  pct25: d.pct25 / 1,\n                  current: d.current / 1,\n                  pct75: d.pct75 / 1,\n                  upper: d.upper / 1\n                };\n              });\n\n              console.log(data);\n      \n              \n              var markers = markerData.map(function (marker) {\n                return {\n                  date: new Date(marker.date),\n                  type: marker.type,\n                  version: marker.version\n                };\n              });\n              makeChart(data, markers);\n    \n    }  \n\n    const d3Container = useRef(null);\n\n    return (\n        <div\n            className=\"dnif_line_area-chart\"\n            width={996}\n            height={444}\n            ref={d3Container}\n        ></div>\n    );\n}\n\nexport default BollingerBands;"]},"metadata":{},"sourceType":"module"}