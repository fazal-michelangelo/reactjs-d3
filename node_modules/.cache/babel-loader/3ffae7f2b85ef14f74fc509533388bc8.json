{"ast":null,"code":"var _jsxFileName = \"/home/fazal/Documents/claudius/D3-charts/src/BollingerBands2.js\";\n\n/* eslint-disable no-unused-expressions */\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { lab } from 'd3';\n\nconst moment = require('moment');\n\nconst BollingerBands = props => {\n  useEffect(() => {\n    drawChart();\n  });\n\n  function drawChart() {\n    var margin = {\n      top: 20,\n      right: 20,\n      bottom: 30,\n      left: 50\n    },\n        width = 960 - margin.left - margin.right,\n        height = 500 - margin.top - margin.bottom;\n    var n = 20; // n-period of moving average\n\n    var k = 2; // k times n-period standard deviation above/below moving average\n\n    var parseDate = d3.timeParse(\"%m/%d/%Y\");\n    var x = d3.scaleTime().range([0, width]);\n    var y = d3.scaleLinear().range([height, 0]); // var xAxis = d3.axisBottom(x).tickSize(0),\n    // xAxis2 = d3.axisBottom(x2).tickSize(0),\n    // yAxis = d3.axisLeft(y).tickSize(0);\n\n    var xAxis = d3.axisBottom(x); // var xAxis = d3.svg.axis()\n    //         .scale(x)\n    //         .orient(\"bottom\");\n    // var yAxis = d3.svg.axis()\n    //         .scale(y)\n    //         .orient(\"left\")\n    //         .tickSize(3, 0);\n\n    var yAxis = d3.axisLeft(y).tickSize(3);\n    var line = d3.line().x(function (d) {\n      return x(d.date);\n    }).y(function (d) {\n      return y(d.close);\n    });\n    var ma = d3.line().x(function (d) {\n      return x(d.date);\n    }).y(function (d) {\n      return y(d.ma);\n    });\n    var lowBand = d3.line().x(function (d) {\n      return x(d.date);\n    }).y(function (d) {\n      return y(d.low);\n    });\n    var highBand = d3.line().x(function (d) {\n      return x(d.date);\n    }).y(function (d) {\n      return y(d.high);\n    });\n    var bandsArea = d3.area().x(function (d) {\n      return x(d.date);\n    }).y0(function (d) {\n      return y(d.low);\n    }).y1(function (d) {\n      return y(d.high);\n    });\n    var svg = d3.select(\"body\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\"); // d3.csv(\"data.csv\", function(error, data) {\n\n    var testData = [{\n      \"date\": \"9/13/2012\",\n      \"close\": 177.35\n    }, {\n      \"date\": \"9/14/2012\",\n      \"close\": 175.85\n    }, {\n      \"date\": \"9/17/2012\",\n      \"close\": 173.65\n    }, {\n      \"date\": \"9/18/2012\",\n      \"close\": 175.4\n    }, {\n      \"date\": \"9/19/2012\",\n      \"close\": 174.45\n    }, {\n      \"date\": \"9/20/2012\",\n      \"close\": 175\n    }, {\n      \"date\": \"9/21/2012\",\n      \"close\": 178.45\n    }, {\n      \"date\": \"9/24/2012\",\n      \"close\": 178\n    }, {\n      \"date\": \"9/25/2012\",\n      \"close\": 178.85\n    }, {\n      \"date\": \"9/26/2012\",\n      \"close\": 177.4\n    }, {\n      \"date\": \"9/27/2012\",\n      \"close\": 176.9\n    }, {\n      \"date\": \"9/28/2012\",\n      \"close\": 175.75\n    }, {\n      \"date\": \"10/1/2012\",\n      \"close\": 176.35\n    }, {\n      \"date\": \"10/2/2012\",\n      \"close\": 176\n    }, {\n      \"date\": \"10/3/2012\",\n      \"close\": 177.5\n    }, {\n      \"date\": \"10/4/2012\",\n      \"close\": 178\n    }, {\n      \"date\": \"10/5/2012\",\n      \"close\": 180.65\n    }, {\n      \"date\": \"10/8/2012\",\n      \"close\": 180.35\n    }, {\n      \"date\": \"10/9/2012\",\n      \"close\": 179.35\n    }, {\n      \"date\": \"10/10/2012\",\n      \"close\": 178.05\n    }, {\n      \"date\": \"10/11/2012\",\n      \"close\": 178.35\n    }, {\n      \"date\": \"10/12/2012\",\n      \"close\": 174.8\n    }, {\n      \"date\": \"10/15/2012\",\n      \"close\": 173.3\n    }, {\n      \"date\": \"10/16/2012\",\n      \"close\": 173\n    }, {\n      \"date\": \"10/17/2012\",\n      \"close\": 174.75\n    }, {\n      \"date\": \"10/18/2012\",\n      \"close\": 176.8\n    }, {\n      \"date\": \"10/19/2012\",\n      \"close\": 177.5\n    }, {\n      \"date\": \"10/22/2012\",\n      \"close\": 177.05\n    }, {\n      \"date\": \"10/23/2012\",\n      \"close\": 175\n    }, {\n      \"date\": \"10/24/2012\",\n      \"close\": 172.45\n    }, {\n      \"date\": \"10/25/2012\",\n      \"close\": 170.65\n    }, {\n      \"date\": \"10/26/2012\",\n      \"close\": 169.7\n    }, {\n      \"date\": \"10/29/2012\",\n      \"close\": 169.55\n    }, {\n      \"date\": \"10/30/2012\",\n      \"close\": 171.05\n    }, {\n      \"date\": \"10/31/2012\",\n      \"close\": 168.25\n    }, {\n      \"date\": \"11/1/2012\",\n      \"close\": 170\n    }, {\n      \"date\": \"11/2/2012\",\n      \"close\": 168.2\n    }, {\n      \"date\": \"11/5/2012\",\n      \"close\": 167.45\n    }, {\n      \"date\": \"11/6/2012\",\n      \"close\": 169\n    }, {\n      \"date\": \"11/7/2012\",\n      \"close\": 167.7\n    }, {\n      \"date\": \"11/8/2012\",\n      \"close\": 167.6\n    }, {\n      \"date\": \"11/9/2012\",\n      \"close\": 167.6\n    }, {\n      \"date\": \"11/12/2012\",\n      \"close\": 166.6\n    }, {\n      \"date\": \"11/13/2012\",\n      \"close\": 162.5\n    }, {\n      \"date\": \"11/14/2012\",\n      \"close\": 160.9\n    }, {\n      \"date\": \"11/15/2012\",\n      \"close\": 159.15\n    }, {\n      \"date\": \"11/16/2012\",\n      \"close\": 157.8\n    }, {\n      \"date\": \"11/19/2012\",\n      \"close\": 160.5\n    }, {\n      \"date\": \"11/20/2012\",\n      \"close\": 162.3\n    }, {\n      \"date\": \"11/21/2012\",\n      \"close\": 159.15\n    }, {\n      \"date\": \"11/22/2012\",\n      \"close\": 158.3\n    }, {\n      \"date\": \"11/23/2012\",\n      \"close\": 158.7\n    }, {\n      \"date\": \"11/26/2012\",\n      \"close\": 157.65\n    }, {\n      \"date\": \"11/27/2012\",\n      \"close\": 156.9\n    }, {\n      \"date\": \"11/28/2012\",\n      \"close\": 158.25\n    }, {\n      \"date\": \"11/29/2012\",\n      \"close\": 160.3\n    }, {\n      \"date\": \"11/30/2012\",\n      \"close\": 161.15\n    }, {\n      \"date\": \"12/3/2012\",\n      \"close\": 160.9\n    }, {\n      \"date\": \"12/4/2012\",\n      \"close\": 159.55\n    }, {\n      \"date\": \"12/5/2012\",\n      \"close\": 159.35\n    }, {\n      \"date\": \"12/6/2012\",\n      \"close\": 161.45\n    }, {\n      \"date\": \"12/7/2012\",\n      \"close\": 161.85\n    }, {\n      \"date\": \"12/10/2012\",\n      \"close\": 161.55\n    }, {\n      \"date\": \"12/11/2012\",\n      \"close\": 161.3\n    }, {\n      \"date\": \"12/12/2012\",\n      \"close\": 161.55\n    }, {\n      \"date\": \"12/13/2012\",\n      \"close\": 162.5\n    }, {\n      \"date\": \"12/14/2012\",\n      \"close\": 160.95\n    }, {\n      \"date\": \"12/17/2012\",\n      \"close\": 158.2\n    }, {\n      \"date\": \"12/18/2012\",\n      \"close\": 156.25\n    }, {\n      \"date\": \"12/19/2012\",\n      \"close\": 156.65\n    }, {\n      \"date\": \"12/20/2012\",\n      \"close\": 155.8\n    }, {\n      \"date\": \"12/21/2012\",\n      \"close\": 155.6\n    }, {\n      \"date\": \"12/24/2012\",\n      \"close\": 156.3\n    }, {\n      \"date\": \"12/25/2012\",\n      \"close\": 156.3\n    }, {\n      \"date\": \"12/26/2012\",\n      \"close\": 156.3\n    }, {\n      \"date\": \"12/27/2012\",\n      \"close\": 156.05\n    }, {\n      \"date\": \"12/28/2012\",\n      \"close\": 155.4\n    }, {\n      \"date\": \"12/31/2012\",\n      \"close\": 154.45\n    }, {\n      \"date\": \"1/1/2013\",\n      \"close\": 154.45\n    }, {\n      \"date\": \"1/2/2013\",\n      \"close\": 157.45\n    }, {\n      \"date\": \"1/3/2013\",\n      \"close\": 157.4\n    }, {\n      \"date\": \"1/4/2013\",\n      \"close\": 160.05\n    }, {\n      \"date\": \"1/7/2013\",\n      \"close\": 159.65\n    }, {\n      \"date\": \"1/8/2013\",\n      \"close\": 162.4\n    }, {\n      \"date\": \"1/9/2013\",\n      \"close\": 165.5\n    }, {\n      \"date\": \"1/10/2013\",\n      \"close\": 164.5\n    }, {\n      \"date\": \"1/11/2013\",\n      \"close\": 165.2\n    }, {\n      \"date\": \"1/14/2013\",\n      \"close\": 163.85\n    }, {\n      \"date\": \"1/15/2013\",\n      \"close\": 163\n    }, {\n      \"date\": \"1/16/2013\",\n      \"close\": 160\n    }, {\n      \"date\": \"1/17/2013\",\n      \"close\": 160.65\n    }, {\n      \"date\": \"1/18/2013\",\n      \"close\": 161.85\n    }, {\n      \"date\": \"1/21/2013\",\n      \"close\": 162.25\n    }, {\n      \"date\": \"1/22/2013\",\n      \"close\": 162.4\n    }, {\n      \"date\": \"1/23/2013\",\n      \"close\": 163.45\n    }, {\n      \"date\": \"1/24/2013\",\n      \"close\": 168.65\n    }, {\n      \"date\": \"1/25/2013\",\n      \"close\": 170.25\n    }, {\n      \"date\": \"1/28/2013\",\n      \"close\": 171.1\n    }, {\n      \"date\": \"1/29/2013\",\n      \"close\": 172.9\n    }, {\n      \"date\": \"1/30/2013\",\n      \"close\": 173.5\n    }, {\n      \"date\": \"1/31/2013\",\n      \"close\": 172.1\n    }, {\n      \"date\": \"2/1/2013\",\n      \"close\": 173.45\n    }, {\n      \"date\": \"2/4/2013\",\n      \"close\": 170.5\n    }, {\n      \"date\": \"2/5/2013\",\n      \"close\": 171.25\n    }, {\n      \"date\": \"2/6/2013\",\n      \"close\": 170.35\n    }, {\n      \"date\": \"2/7/2013\",\n      \"close\": 171.85\n    }, {\n      \"date\": \"2/8/2013\",\n      \"close\": 173.9\n    }, {\n      \"date\": \"2/11/2013\",\n      \"close\": 173.65\n    }, {\n      \"date\": \"2/12/2013\",\n      \"close\": 173.5\n    }, {\n      \"date\": \"2/13/2013\",\n      \"close\": 171.65\n    }, {\n      \"date\": \"2/14/2013\",\n      \"close\": 167.55\n    }, {\n      \"date\": \"2/15/2013\",\n      \"close\": 167.8\n    }, {\n      \"date\": \"2/18/2013\",\n      \"close\": 166.8\n    }, {\n      \"date\": \"2/19/2013\",\n      \"close\": 163.5\n    }, {\n      \"date\": \"2/20/2013\",\n      \"close\": 162.5\n    }, {\n      \"date\": \"2/21/2013\",\n      \"close\": 160\n    }, {\n      \"date\": \"2/22/2013\",\n      \"close\": 163.05\n    }, {\n      \"date\": \"2/25/2013\",\n      \"close\": 164.1\n    }, {\n      \"date\": \"2/26/2013\",\n      \"close\": 161.9\n    }, {\n      \"date\": \"2/27/2013\",\n      \"close\": 165.1\n    }, {\n      \"date\": \"2/28/2013\",\n      \"close\": 165.55\n    }, {\n      \"date\": \"3/1/2013\",\n      \"close\": 168.3\n    }, {\n      \"date\": \"3/4/2013\",\n      \"close\": 167.7\n    }, {\n      \"date\": \"3/5/2013\",\n      \"close\": 168.6\n    }, {\n      \"date\": \"3/6/2013\",\n      \"close\": 180\n    }, {\n      \"date\": \"3/7/2013\",\n      \"close\": 178.6\n    }, {\n      \"date\": \"3/8/2013\",\n      \"close\": 184.35\n    }, {\n      \"date\": \"3/11/2013\",\n      \"close\": 185.75\n    }, {\n      \"date\": \"3/12/2013\",\n      \"close\": 185\n    }, {\n      \"date\": \"3/13/2013\",\n      \"close\": 182.25\n    }, {\n      \"date\": \"3/14/2013\",\n      \"close\": 184.55\n    }, {\n      \"date\": \"3/15/2013\",\n      \"close\": 183.25\n    }, {\n      \"date\": \"3/18/2013\",\n      \"close\": 184.95\n    }, {\n      \"date\": \"3/19/2013\",\n      \"close\": 187.6\n    }, {\n      \"date\": \"3/20/2013\",\n      \"close\": 185.8\n    }, {\n      \"date\": \"3/21/2013\",\n      \"close\": 183.55\n    }, {\n      \"date\": \"3/22/2013\",\n      \"close\": 183.45\n    }, {\n      \"date\": \"3/25/2013\",\n      \"close\": 187.2\n    }, {\n      \"date\": \"3/26/2013\",\n      \"close\": 187.75\n    }, {\n      \"date\": \"3/27/2013\",\n      \"close\": 186\n    }, {\n      \"date\": \"3/28/2013\",\n      \"close\": 186.6\n    }, {\n      \"date\": \"3/29/2013\",\n      \"close\": 186.6\n    }, {\n      \"date\": \"4/1/2013\",\n      \"close\": 186.6\n    }, {\n      \"date\": \"4/2/2013\",\n      \"close\": 192\n    }, {\n      \"date\": \"4/3/2013\",\n      \"close\": 186.15\n    }, {\n      \"date\": \"4/4/2013\",\n      \"close\": 184.8\n    }, {\n      \"date\": \"4/5/2013\",\n      \"close\": 182.6\n    }, {\n      \"date\": \"4/8/2013\",\n      \"close\": 184.8\n    }, {\n      \"date\": \"4/9/2013\",\n      \"close\": 187.5\n    }, {\n      \"date\": \"4/10/2013\",\n      \"close\": 189.2\n    }, {\n      \"date\": \"4/11/2013\",\n      \"close\": 189.8\n    }, {\n      \"date\": \"4/12/2013\",\n      \"close\": 190.55\n    }, {\n      \"date\": \"4/15/2013\",\n      \"close\": 191\n    }, {\n      \"date\": \"4/16/2013\",\n      \"close\": 189.9\n    }, {\n      \"date\": \"4/17/2013\",\n      \"close\": 189.25\n    }, {\n      \"date\": \"4/18/2013\",\n      \"close\": 192.5\n    }, {\n      \"date\": \"4/19/2013\",\n      \"close\": 193.25\n    }, {\n      \"date\": \"4/22/2013\",\n      \"close\": 194.8\n    }, {\n      \"date\": \"4/23/2013\",\n      \"close\": 195.05\n    }, {\n      \"date\": \"4/24/2013\",\n      \"close\": 193.2\n    }, {\n      \"date\": \"4/25/2013\",\n      \"close\": 196.4\n    }, {\n      \"date\": \"4/26/2013\",\n      \"close\": 197.2\n    }, {\n      \"date\": \"4/29/2013\",\n      \"close\": 196.85\n    }, {\n      \"date\": \"4/30/2013\",\n      \"close\": 196.2\n    }, {\n      \"date\": \"5/1/2013\",\n      \"close\": 196.05\n    }, {\n      \"date\": \"5/2/2013\",\n      \"close\": 193.95\n    }, {\n      \"date\": \"5/3/2013\",\n      \"close\": 193.8\n    }, {\n      \"date\": \"5/6/2013\",\n      \"close\": 193.8\n    }, {\n      \"date\": \"5/7/2013\",\n      \"close\": 194.35\n    }, {\n      \"date\": \"5/8/2013\",\n      \"close\": 193.05\n    }, {\n      \"date\": \"5/9/2013\",\n      \"close\": 192.4\n    }, {\n      \"date\": \"5/10/2013\",\n      \"close\": 194.35\n    }, {\n      \"date\": \"5/13/2013\",\n      \"close\": 193.5\n    }, {\n      \"date\": \"5/14/2013\",\n      \"close\": 193.5\n    }, {\n      \"date\": \"5/15/2013\",\n      \"close\": 195.2\n    }, {\n      \"date\": \"5/16/2013\",\n      \"close\": 197.05\n    }, {\n      \"date\": \"5/17/2013\",\n      \"close\": 197.7\n    }, {\n      \"date\": \"5/20/2013\",\n      \"close\": 197.6\n    }, {\n      \"date\": \"5/21/2013\",\n      \"close\": 199.9\n    }, {\n      \"date\": \"5/22/2013\",\n      \"close\": 196.8\n    }, {\n      \"date\": \"5/23/2013\",\n      \"close\": 193.55\n    }, {\n      \"date\": \"5/24/2013\",\n      \"close\": 194.55\n    }, {\n      \"date\": \"5/27/2013\",\n      \"close\": 194.55\n    }, {\n      \"date\": \"5/28/2013\",\n      \"close\": 197.7\n    }, {\n      \"date\": \"5/29/2013\",\n      \"close\": 192.95\n    }, {\n      \"date\": \"5/30/2013\",\n      \"close\": 193\n    }, {\n      \"date\": \"5/31/2013\",\n      \"close\": 191.95\n    }, {\n      \"date\": \"6/3/2013\",\n      \"close\": 188.6\n    }, {\n      \"date\": \"6/4/2013\",\n      \"close\": 192.05\n    }, {\n      \"date\": \"6/5/2013\",\n      \"close\": 187.5\n    }, {\n      \"date\": \"6/6/2013\",\n      \"close\": 188.15\n    }, {\n      \"date\": \"6/7/2013\",\n      \"close\": 191.85\n    }, {\n      \"date\": \"6/10/2013\",\n      \"close\": 191.75\n    }, {\n      \"date\": \"6/11/2013\",\n      \"close\": 192\n    }, {\n      \"date\": \"6/12/2013\",\n      \"close\": 181\n    }, {\n      \"date\": \"6/13/2013\",\n      \"close\": 178.7\n    }, {\n      \"date\": \"6/14/2013\",\n      \"close\": 180.05\n    }, {\n      \"date\": \"6/17/2013\",\n      \"close\": 182.7\n    }, {\n      \"date\": \"6/18/2013\",\n      \"close\": 184.35\n    }, {\n      \"date\": \"6/19/2013\",\n      \"close\": 181.45\n    }, {\n      \"date\": \"6/20/2013\",\n      \"close\": 177.75\n    }, {\n      \"date\": \"6/21/2013\",\n      \"close\": 175.85\n    }, {\n      \"date\": \"6/24/2013\",\n      \"close\": 175.9\n    }, {\n      \"date\": \"6/25/2013\",\n      \"close\": 180.2\n    }, {\n      \"date\": \"6/26/2013\",\n      \"close\": 183.35\n    }, {\n      \"date\": \"6/27/2013\",\n      \"close\": 186.35\n    }, {\n      \"date\": \"6/28/2013\",\n      \"close\": 187.85\n    }, {\n      \"date\": \"7/1/2013\",\n      \"close\": 188.6\n    }, {\n      \"date\": \"7/2/2013\",\n      \"close\": 189.9\n    }, {\n      \"date\": \"7/3/2013\",\n      \"close\": 187.35\n    }, {\n      \"date\": \"7/4/2013\",\n      \"close\": 193.9\n    }, {\n      \"date\": \"7/5/2013\",\n      \"close\": 191.75\n    }, {\n      \"date\": \"7/8/2013\",\n      \"close\": 191.9\n    }, {\n      \"date\": \"7/9/2013\",\n      \"close\": 193.95\n    }, {\n      \"date\": \"7/10/2013\",\n      \"close\": 192.5\n    }, {\n      \"date\": \"7/11/2013\",\n      \"close\": 191.55\n    }, {\n      \"date\": \"7/12/2013\",\n      \"close\": 193.8\n    }, {\n      \"date\": \"7/15/2013\",\n      \"close\": 195.5\n    }, {\n      \"date\": \"7/16/2013\",\n      \"close\": 193.45\n    }, {\n      \"date\": \"7/17/2013\",\n      \"close\": 192.3\n    }, {\n      \"date\": \"7/18/2013\",\n      \"close\": 191.35\n    }, {\n      \"date\": \"7/19/2013\",\n      \"close\": 193.85\n    }, {\n      \"date\": \"7/22/2013\",\n      \"close\": 194\n    }, {\n      \"date\": \"7/23/2013\",\n      \"close\": 192.9\n    }, {\n      \"date\": \"7/24/2013\",\n      \"close\": 193.6\n    }, {\n      \"date\": \"7/25/2013\",\n      \"close\": 193.5\n    }, {\n      \"date\": \"7/26/2013\",\n      \"close\": 192.55\n    }, {\n      \"date\": \"7/29/2013\",\n      \"close\": 194.4\n    }, {\n      \"date\": \"7/30/2013\",\n      \"close\": 195.1\n    }, {\n      \"date\": \"7/31/2013\",\n      \"close\": 197.5\n    }, {\n      \"date\": \"8/1/2013\",\n      \"close\": 200.2\n    }, {\n      \"date\": \"8/2/2013\",\n      \"close\": 199.35\n    }, {\n      \"date\": \"8/5/2013\",\n      \"close\": 198\n    }, {\n      \"date\": \"8/6/2013\",\n      \"close\": 198.15\n    }, {\n      \"date\": \"8/7/2013\",\n      \"close\": 197.7\n    }, {\n      \"date\": \"8/8/2013\",\n      \"close\": 196.8\n    }, {\n      \"date\": \"8/9/2013\",\n      \"close\": 196.7\n    }, {\n      \"date\": \"8/12/2013\",\n      \"close\": 196.2\n    }, {\n      \"date\": \"8/13/2013\",\n      \"close\": 197.7\n    }, {\n      \"date\": \"8/14/2013\",\n      \"close\": 195.3\n    }, {\n      \"date\": \"8/15/2013\",\n      \"close\": 192.85\n    }, {\n      \"date\": \"8/16/2013\",\n      \"close\": 192.3\n    }, {\n      \"date\": \"8/19/2013\",\n      \"close\": 189.85\n    }, {\n      \"date\": \"8/20/2013\",\n      \"close\": 190.2\n    }, {\n      \"date\": \"8/21/2013\",\n      \"close\": 190\n    }, {\n      \"date\": \"8/22/2013\",\n      \"close\": 190.05\n    }, {\n      \"date\": \"8/23/2013\",\n      \"close\": 191.75\n    }, {\n      \"date\": \"8/26/2013\",\n      \"close\": 191.75\n    }, {\n      \"date\": \"8/27/2013\",\n      \"close\": 190.1\n    }, {\n      \"date\": \"8/28/2013\",\n      \"close\": 189.3\n    }, {\n      \"date\": \"8/29/2013\",\n      \"close\": 204.75\n    }, {\n      \"date\": \"8/30/2013\",\n      \"close\": 206.25\n    }, {\n      \"date\": \"9/2/2013\",\n      \"close\": 213.2\n    }, {\n      \"date\": \"9/3/2013\",\n      \"close\": 202.5\n    }, {\n      \"date\": \"9/4/2013\",\n      \"close\": 207\n    }, {\n      \"date\": \"9/5/2013\",\n      \"close\": 210.55\n    }, {\n      \"date\": \"9/6/2013\",\n      \"close\": 210.75\n    }, {\n      \"date\": \"9/9/2013\",\n      \"close\": 210.4\n    }, {\n      \"date\": \"9/10/2013\",\n      \"close\": 207.9\n    }, {\n      \"date\": \"9/11/2013\",\n      \"close\": 210.15\n    }, {\n      \"date\": \"9/12/2013\",\n      \"close\": 210.1\n    }];\n    var data = [];\n    testData.forEach(function (d) {\n      data.push({\n        \"date\": parseDate(d.date),\n        \"close\": d.close\n      }); // d.date = parseDate(d.date);\n      // d.close = +d.close;\n    });\n    var bandsData = getBollingerBands(n, k, data);\n    x.domain(d3.extent(data, function (d) {\n      return d.date;\n    }));\n    y.domain([d3.min(bandsData, function (d) {\n      return d.low;\n    }), d3.max(bandsData, function (d) {\n      return d.high;\n    })]);\n    svg.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + height + \")\").call(xAxis);\n    svg.append(\"g\").attr(\"class\", \"y axis\").call(yAxis);\n    svg.append(\"path\").datum(bandsData).attr(\"class\", \"area bands\").attr(\"d\", bandsArea);\n    svg.append(\"path\").datum(bandsData).attr(\"class\", \"line bands\").attr(\"d\", lowBand);\n    svg.append(\"path\").datum(bandsData).attr(\"class\", \"line bands\").attr(\"d\", highBand);\n    svg.append(\"path\").datum(bandsData).attr(\"class\", \"line ma bands\").attr(\"d\", ma);\n    svg.append(\"path\").datum(data).attr(\"class\", \"line\").attr(\"d\", line); // });\n\n    function getBollingerBands(n, k, data) {\n      var bands = []; //{ ma: 0, low: 0, high: 0 }\n\n      for (var i = n - 1, len = data.length; i < len; i++) {\n        var slice = data.slice(i + 1 - n, i);\n        var mean = d3.mean(slice, function (d) {\n          return d.close;\n        });\n        var stdDev = Math.sqrt(d3.mean(slice.map(function (d) {\n          return Math.pow(d.close - mean, 2);\n        })));\n        bands.push({\n          date: data[i].date,\n          ma: mean,\n          low: mean - k * stdDev,\n          high: mean + k * stdDev\n        });\n      }\n\n      return bands;\n    }\n  }\n\n  const d3Container = useRef(null);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d3-lollipop-chart\",\n    width: 996,\n    height: 444,\n    ref: d3Container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1190,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default BollingerBands;","map":{"version":3,"sources":["/home/fazal/Documents/claudius/D3-charts/src/BollingerBands2.js"],"names":["React","useRef","useEffect","d3","lab","moment","require","BollingerBands","props","drawChart","margin","top","right","bottom","left","width","height","n","k","parseDate","timeParse","x","scaleTime","range","y","scaleLinear","xAxis","axisBottom","yAxis","axisLeft","tickSize","line","d","date","close","ma","lowBand","low","highBand","high","bandsArea","area","y0","y1","svg","select","append","attr","testData","data","forEach","push","bandsData","getBollingerBands","domain","extent","min","max","call","datum","bands","i","len","length","slice","mean","stdDev","Math","sqrt","map","pow","d3Container"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-expressions */\n\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { lab } from 'd3';\nconst moment = require('moment');\n\n\nconst BollingerBands = (props) => {\n    useEffect(() => {\n        drawChart();\n    });\n\n    function drawChart() {\n\n        var margin = { top: 20, right: 20, bottom: 30, left: 50 },\n        width = 960 - margin.left - margin.right,\n        height = 500 - margin.top - margin.bottom;\n  \n    var n = 20; // n-period of moving average\n    var k = 2;  // k times n-period standard deviation above/below moving average\n  \n    var parseDate = d3.timeParse(\"%m/%d/%Y\");\n\n    var x = d3.scaleTime()\n            .range([0, width]);\n\n\n    var y = d3.scaleLinear()\n            .range([height, 0]);\n\n\n            // var xAxis = d3.axisBottom(x).tickSize(0),\n            // xAxis2 = d3.axisBottom(x2).tickSize(0),\n            // yAxis = d3.axisLeft(y).tickSize(0);\n\n            \n    var xAxis = d3.axisBottom(x);\n\n    // var xAxis = d3.svg.axis()\n    //         .scale(x)\n    //         .orient(\"bottom\");\n\n    // var yAxis = d3.svg.axis()\n    //         .scale(y)\n    //         .orient(\"left\")\n    //         .tickSize(3, 0);\n\n    var yAxis = d3.axisLeft(y).tickSize(3);\n    var line = d3.line()\n            .x(function(d) { return x(d.date); })\n            .y(function(d) { return y(d.close); });\n    var ma = d3.line()\n            .x(function(d) { return x(d.date); })\n            .y(function(d) { return y(d.ma); });\n    var lowBand = d3.line()\n            .x(function(d) { return x(d.date); })\n            .y(function(d) { return y(d.low); });\n    var highBand = d3.line()\n            .x(function(d) { return x(d.date); })\n            .y(function(d) { return y(d.high); });\n    var bandsArea = d3.area()\n            .x(function(d) { return x(d.date); })\n            .y0(function(d) { return y(d.low); })\n            .y1(function(d) { return y(d.high); });\n  \n    var svg = d3.select(\"body\").append(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  \n    // d3.csv(\"data.csv\", function(error, data) {\n\nvar testData = \n\n        [\n            {\n              \"date\": \"9/13/2012\",\n              \"close\": 177.35\n            },\n            {\n              \"date\": \"9/14/2012\",\n              \"close\": 175.85\n            },\n            {\n              \"date\": \"9/17/2012\",\n              \"close\": 173.65\n            },\n            {\n              \"date\": \"9/18/2012\",\n              \"close\": 175.4\n            },\n            {\n              \"date\": \"9/19/2012\",\n              \"close\": 174.45\n            },\n            {\n              \"date\": \"9/20/2012\",\n              \"close\": 175\n            },\n            {\n              \"date\": \"9/21/2012\",\n              \"close\": 178.45\n            },\n            {\n              \"date\": \"9/24/2012\",\n              \"close\": 178\n            },\n            {\n              \"date\": \"9/25/2012\",\n              \"close\": 178.85\n            },\n            {\n              \"date\": \"9/26/2012\",\n              \"close\": 177.4\n            },\n            {\n              \"date\": \"9/27/2012\",\n              \"close\": 176.9\n            },\n            {\n              \"date\": \"9/28/2012\",\n              \"close\": 175.75\n            },\n            {\n              \"date\": \"10/1/2012\",\n              \"close\": 176.35\n            },\n            {\n              \"date\": \"10/2/2012\",\n              \"close\": 176\n            },\n            {\n              \"date\": \"10/3/2012\",\n              \"close\": 177.5\n            },\n            {\n              \"date\": \"10/4/2012\",\n              \"close\": 178\n            },\n            {\n              \"date\": \"10/5/2012\",\n              \"close\": 180.65\n            },\n            {\n              \"date\": \"10/8/2012\",\n              \"close\": 180.35\n            },\n            {\n              \"date\": \"10/9/2012\",\n              \"close\": 179.35\n            },\n            {\n              \"date\": \"10/10/2012\",\n              \"close\": 178.05\n            },\n            {\n              \"date\": \"10/11/2012\",\n              \"close\": 178.35\n            },\n            {\n              \"date\": \"10/12/2012\",\n              \"close\": 174.8\n            },\n            {\n              \"date\": \"10/15/2012\",\n              \"close\": 173.3\n            },\n            {\n              \"date\": \"10/16/2012\",\n              \"close\": 173\n            },\n            {\n              \"date\": \"10/17/2012\",\n              \"close\": 174.75\n            },\n            {\n              \"date\": \"10/18/2012\",\n              \"close\": 176.8\n            },\n            {\n              \"date\": \"10/19/2012\",\n              \"close\": 177.5\n            },\n            {\n              \"date\": \"10/22/2012\",\n              \"close\": 177.05\n            },\n            {\n              \"date\": \"10/23/2012\",\n              \"close\": 175\n            },\n            {\n              \"date\": \"10/24/2012\",\n              \"close\": 172.45\n            },\n            {\n              \"date\": \"10/25/2012\",\n              \"close\": 170.65\n            },\n            {\n              \"date\": \"10/26/2012\",\n              \"close\": 169.7\n            },\n            {\n              \"date\": \"10/29/2012\",\n              \"close\": 169.55\n            },\n            {\n              \"date\": \"10/30/2012\",\n              \"close\": 171.05\n            },\n            {\n              \"date\": \"10/31/2012\",\n              \"close\": 168.25\n            },\n            {\n              \"date\": \"11/1/2012\",\n              \"close\": 170\n            },\n            {\n              \"date\": \"11/2/2012\",\n              \"close\": 168.2\n            },\n            {\n              \"date\": \"11/5/2012\",\n              \"close\": 167.45\n            },\n            {\n              \"date\": \"11/6/2012\",\n              \"close\": 169\n            },\n            {\n              \"date\": \"11/7/2012\",\n              \"close\": 167.7\n            },\n            {\n              \"date\": \"11/8/2012\",\n              \"close\": 167.6\n            },\n            {\n              \"date\": \"11/9/2012\",\n              \"close\": 167.6\n            },\n            {\n              \"date\": \"11/12/2012\",\n              \"close\": 166.6\n            },\n            {\n              \"date\": \"11/13/2012\",\n              \"close\": 162.5\n            },\n            {\n              \"date\": \"11/14/2012\",\n              \"close\": 160.9\n            },\n            {\n              \"date\": \"11/15/2012\",\n              \"close\": 159.15\n            },\n            {\n              \"date\": \"11/16/2012\",\n              \"close\": 157.8\n            },\n            {\n              \"date\": \"11/19/2012\",\n              \"close\": 160.5\n            },\n            {\n              \"date\": \"11/20/2012\",\n              \"close\": 162.3\n            },\n            {\n              \"date\": \"11/21/2012\",\n              \"close\": 159.15\n            },\n            {\n              \"date\": \"11/22/2012\",\n              \"close\": 158.3\n            },\n            {\n              \"date\": \"11/23/2012\",\n              \"close\": 158.7\n            },\n            {\n              \"date\": \"11/26/2012\",\n              \"close\": 157.65\n            },\n            {\n              \"date\": \"11/27/2012\",\n              \"close\": 156.9\n            },\n            {\n              \"date\": \"11/28/2012\",\n              \"close\": 158.25\n            },\n            {\n              \"date\": \"11/29/2012\",\n              \"close\": 160.3\n            },\n            {\n              \"date\": \"11/30/2012\",\n              \"close\": 161.15\n            },\n            {\n              \"date\": \"12/3/2012\",\n              \"close\": 160.9\n            },\n            {\n              \"date\": \"12/4/2012\",\n              \"close\": 159.55\n            },\n            {\n              \"date\": \"12/5/2012\",\n              \"close\": 159.35\n            },\n            {\n              \"date\": \"12/6/2012\",\n              \"close\": 161.45\n            },\n            {\n              \"date\": \"12/7/2012\",\n              \"close\": 161.85\n            },\n            {\n              \"date\": \"12/10/2012\",\n              \"close\": 161.55\n            },\n            {\n              \"date\": \"12/11/2012\",\n              \"close\": 161.3\n            },\n            {\n              \"date\": \"12/12/2012\",\n              \"close\": 161.55\n            },\n            {\n              \"date\": \"12/13/2012\",\n              \"close\": 162.5\n            },\n            {\n              \"date\": \"12/14/2012\",\n              \"close\": 160.95\n            },\n            {\n              \"date\": \"12/17/2012\",\n              \"close\": 158.2\n            },\n            {\n              \"date\": \"12/18/2012\",\n              \"close\": 156.25\n            },\n            {\n              \"date\": \"12/19/2012\",\n              \"close\": 156.65\n            },\n            {\n              \"date\": \"12/20/2012\",\n              \"close\": 155.8\n            },\n            {\n              \"date\": \"12/21/2012\",\n              \"close\": 155.6\n            },\n            {\n              \"date\": \"12/24/2012\",\n              \"close\": 156.3\n            },\n            {\n              \"date\": \"12/25/2012\",\n              \"close\": 156.3\n            },\n            {\n              \"date\": \"12/26/2012\",\n              \"close\": 156.3\n            },\n            {\n              \"date\": \"12/27/2012\",\n              \"close\": 156.05\n            },\n            {\n              \"date\": \"12/28/2012\",\n              \"close\": 155.4\n            },\n            {\n              \"date\": \"12/31/2012\",\n              \"close\": 154.45\n            },\n            {\n              \"date\": \"1/1/2013\",\n              \"close\": 154.45\n            },\n            {\n              \"date\": \"1/2/2013\",\n              \"close\": 157.45\n            },\n            {\n              \"date\": \"1/3/2013\",\n              \"close\": 157.4\n            },\n            {\n              \"date\": \"1/4/2013\",\n              \"close\": 160.05\n            },\n            {\n              \"date\": \"1/7/2013\",\n              \"close\": 159.65\n            },\n            {\n              \"date\": \"1/8/2013\",\n              \"close\": 162.4\n            },\n            {\n              \"date\": \"1/9/2013\",\n              \"close\": 165.5\n            },\n            {\n              \"date\": \"1/10/2013\",\n              \"close\": 164.5\n            },\n            {\n              \"date\": \"1/11/2013\",\n              \"close\": 165.2\n            },\n            {\n              \"date\": \"1/14/2013\",\n              \"close\": 163.85\n            },\n            {\n              \"date\": \"1/15/2013\",\n              \"close\": 163\n            },\n            {\n              \"date\": \"1/16/2013\",\n              \"close\": 160\n            },\n            {\n              \"date\": \"1/17/2013\",\n              \"close\": 160.65\n            },\n            {\n              \"date\": \"1/18/2013\",\n              \"close\": 161.85\n            },\n            {\n              \"date\": \"1/21/2013\",\n              \"close\": 162.25\n            },\n            {\n              \"date\": \"1/22/2013\",\n              \"close\": 162.4\n            },\n            {\n              \"date\": \"1/23/2013\",\n              \"close\": 163.45\n            },\n            {\n              \"date\": \"1/24/2013\",\n              \"close\": 168.65\n            },\n            {\n              \"date\": \"1/25/2013\",\n              \"close\": 170.25\n            },\n            {\n              \"date\": \"1/28/2013\",\n              \"close\": 171.1\n            },\n            {\n              \"date\": \"1/29/2013\",\n              \"close\": 172.9\n            },\n            {\n              \"date\": \"1/30/2013\",\n              \"close\": 173.5\n            },\n            {\n              \"date\": \"1/31/2013\",\n              \"close\": 172.1\n            },\n            {\n              \"date\": \"2/1/2013\",\n              \"close\": 173.45\n            },\n            {\n              \"date\": \"2/4/2013\",\n              \"close\": 170.5\n            },\n            {\n              \"date\": \"2/5/2013\",\n              \"close\": 171.25\n            },\n            {\n              \"date\": \"2/6/2013\",\n              \"close\": 170.35\n            },\n            {\n              \"date\": \"2/7/2013\",\n              \"close\": 171.85\n            },\n            {\n              \"date\": \"2/8/2013\",\n              \"close\": 173.9\n            },\n            {\n              \"date\": \"2/11/2013\",\n              \"close\": 173.65\n            },\n            {\n              \"date\": \"2/12/2013\",\n              \"close\": 173.5\n            },\n            {\n              \"date\": \"2/13/2013\",\n              \"close\": 171.65\n            },\n            {\n              \"date\": \"2/14/2013\",\n              \"close\": 167.55\n            },\n            {\n              \"date\": \"2/15/2013\",\n              \"close\": 167.8\n            },\n            {\n              \"date\": \"2/18/2013\",\n              \"close\": 166.8\n            },\n            {\n              \"date\": \"2/19/2013\",\n              \"close\": 163.5\n            },\n            {\n              \"date\": \"2/20/2013\",\n              \"close\": 162.5\n            },\n            {\n              \"date\": \"2/21/2013\",\n              \"close\": 160\n            },\n            {\n              \"date\": \"2/22/2013\",\n              \"close\": 163.05\n            },\n            {\n              \"date\": \"2/25/2013\",\n              \"close\": 164.1\n            },\n            {\n              \"date\": \"2/26/2013\",\n              \"close\": 161.9\n            },\n            {\n              \"date\": \"2/27/2013\",\n              \"close\": 165.1\n            },\n            {\n              \"date\": \"2/28/2013\",\n              \"close\": 165.55\n            },\n            {\n              \"date\": \"3/1/2013\",\n              \"close\": 168.3\n            },\n            {\n              \"date\": \"3/4/2013\",\n              \"close\": 167.7\n            },\n            {\n              \"date\": \"3/5/2013\",\n              \"close\": 168.6\n            },\n            {\n              \"date\": \"3/6/2013\",\n              \"close\": 180\n            },\n            {\n              \"date\": \"3/7/2013\",\n              \"close\": 178.6\n            },\n            {\n              \"date\": \"3/8/2013\",\n              \"close\": 184.35\n            },\n            {\n              \"date\": \"3/11/2013\",\n              \"close\": 185.75\n            },\n            {\n              \"date\": \"3/12/2013\",\n              \"close\": 185\n            },\n            {\n              \"date\": \"3/13/2013\",\n              \"close\": 182.25\n            },\n            {\n              \"date\": \"3/14/2013\",\n              \"close\": 184.55\n            },\n            {\n              \"date\": \"3/15/2013\",\n              \"close\": 183.25\n            },\n            {\n              \"date\": \"3/18/2013\",\n              \"close\": 184.95\n            },\n            {\n              \"date\": \"3/19/2013\",\n              \"close\": 187.6\n            },\n            {\n              \"date\": \"3/20/2013\",\n              \"close\": 185.8\n            },\n            {\n              \"date\": \"3/21/2013\",\n              \"close\": 183.55\n            },\n            {\n              \"date\": \"3/22/2013\",\n              \"close\": 183.45\n            },\n            {\n              \"date\": \"3/25/2013\",\n              \"close\": 187.2\n            },\n            {\n              \"date\": \"3/26/2013\",\n              \"close\": 187.75\n            },\n            {\n              \"date\": \"3/27/2013\",\n              \"close\": 186\n            },\n            {\n              \"date\": \"3/28/2013\",\n              \"close\": 186.6\n            },\n            {\n              \"date\": \"3/29/2013\",\n              \"close\": 186.6\n            },\n            {\n              \"date\": \"4/1/2013\",\n              \"close\": 186.6\n            },\n            {\n              \"date\": \"4/2/2013\",\n              \"close\": 192\n            },\n            {\n              \"date\": \"4/3/2013\",\n              \"close\": 186.15\n            },\n            {\n              \"date\": \"4/4/2013\",\n              \"close\": 184.8\n            },\n            {\n              \"date\": \"4/5/2013\",\n              \"close\": 182.6\n            },\n            {\n              \"date\": \"4/8/2013\",\n              \"close\": 184.8\n            },\n            {\n              \"date\": \"4/9/2013\",\n              \"close\": 187.5\n            },\n            {\n              \"date\": \"4/10/2013\",\n              \"close\": 189.2\n            },\n            {\n              \"date\": \"4/11/2013\",\n              \"close\": 189.8\n            },\n            {\n              \"date\": \"4/12/2013\",\n              \"close\": 190.55\n            },\n            {\n              \"date\": \"4/15/2013\",\n              \"close\": 191\n            },\n            {\n              \"date\": \"4/16/2013\",\n              \"close\": 189.9\n            },\n            {\n              \"date\": \"4/17/2013\",\n              \"close\": 189.25\n            },\n            {\n              \"date\": \"4/18/2013\",\n              \"close\": 192.5\n            },\n            {\n              \"date\": \"4/19/2013\",\n              \"close\": 193.25\n            },\n            {\n              \"date\": \"4/22/2013\",\n              \"close\": 194.8\n            },\n            {\n              \"date\": \"4/23/2013\",\n              \"close\": 195.05\n            },\n            {\n              \"date\": \"4/24/2013\",\n              \"close\": 193.2\n            },\n            {\n              \"date\": \"4/25/2013\",\n              \"close\": 196.4\n            },\n            {\n              \"date\": \"4/26/2013\",\n              \"close\": 197.2\n            },\n            {\n              \"date\": \"4/29/2013\",\n              \"close\": 196.85\n            },\n            {\n              \"date\": \"4/30/2013\",\n              \"close\": 196.2\n            },\n            {\n              \"date\": \"5/1/2013\",\n              \"close\": 196.05\n            },\n            {\n              \"date\": \"5/2/2013\",\n              \"close\": 193.95\n            },\n            {\n              \"date\": \"5/3/2013\",\n              \"close\": 193.8\n            },\n            {\n              \"date\": \"5/6/2013\",\n              \"close\": 193.8\n            },\n            {\n              \"date\": \"5/7/2013\",\n              \"close\": 194.35\n            },\n            {\n              \"date\": \"5/8/2013\",\n              \"close\": 193.05\n            },\n            {\n              \"date\": \"5/9/2013\",\n              \"close\": 192.4\n            },\n            {\n              \"date\": \"5/10/2013\",\n              \"close\": 194.35\n            },\n            {\n              \"date\": \"5/13/2013\",\n              \"close\": 193.5\n            },\n            {\n              \"date\": \"5/14/2013\",\n              \"close\": 193.5\n            },\n            {\n              \"date\": \"5/15/2013\",\n              \"close\": 195.2\n            },\n            {\n              \"date\": \"5/16/2013\",\n              \"close\": 197.05\n            },\n            {\n              \"date\": \"5/17/2013\",\n              \"close\": 197.7\n            },\n            {\n              \"date\": \"5/20/2013\",\n              \"close\": 197.6\n            },\n            {\n              \"date\": \"5/21/2013\",\n              \"close\": 199.9\n            },\n            {\n              \"date\": \"5/22/2013\",\n              \"close\": 196.8\n            },\n            {\n              \"date\": \"5/23/2013\",\n              \"close\": 193.55\n            },\n            {\n              \"date\": \"5/24/2013\",\n              \"close\": 194.55\n            },\n            {\n              \"date\": \"5/27/2013\",\n              \"close\": 194.55\n            },\n            {\n              \"date\": \"5/28/2013\",\n              \"close\": 197.7\n            },\n            {\n              \"date\": \"5/29/2013\",\n              \"close\": 192.95\n            },\n            {\n              \"date\": \"5/30/2013\",\n              \"close\": 193\n            },\n            {\n              \"date\": \"5/31/2013\",\n              \"close\": 191.95\n            },\n            {\n              \"date\": \"6/3/2013\",\n              \"close\": 188.6\n            },\n            {\n              \"date\": \"6/4/2013\",\n              \"close\": 192.05\n            },\n            {\n              \"date\": \"6/5/2013\",\n              \"close\": 187.5\n            },\n            {\n              \"date\": \"6/6/2013\",\n              \"close\": 188.15\n            },\n            {\n              \"date\": \"6/7/2013\",\n              \"close\": 191.85\n            },\n            {\n              \"date\": \"6/10/2013\",\n              \"close\": 191.75\n            },\n            {\n              \"date\": \"6/11/2013\",\n              \"close\": 192\n            },\n            {\n              \"date\": \"6/12/2013\",\n              \"close\": 181\n            },\n            {\n              \"date\": \"6/13/2013\",\n              \"close\": 178.7\n            },\n            {\n              \"date\": \"6/14/2013\",\n              \"close\": 180.05\n            },\n            {\n              \"date\": \"6/17/2013\",\n              \"close\": 182.7\n            },\n            {\n              \"date\": \"6/18/2013\",\n              \"close\": 184.35\n            },\n            {\n              \"date\": \"6/19/2013\",\n              \"close\": 181.45\n            },\n            {\n              \"date\": \"6/20/2013\",\n              \"close\": 177.75\n            },\n            {\n              \"date\": \"6/21/2013\",\n              \"close\": 175.85\n            },\n            {\n              \"date\": \"6/24/2013\",\n              \"close\": 175.9\n            },\n            {\n              \"date\": \"6/25/2013\",\n              \"close\": 180.2\n            },\n            {\n              \"date\": \"6/26/2013\",\n              \"close\": 183.35\n            },\n            {\n              \"date\": \"6/27/2013\",\n              \"close\": 186.35\n            },\n            {\n              \"date\": \"6/28/2013\",\n              \"close\": 187.85\n            },\n            {\n              \"date\": \"7/1/2013\",\n              \"close\": 188.6\n            },\n            {\n              \"date\": \"7/2/2013\",\n              \"close\": 189.9\n            },\n            {\n              \"date\": \"7/3/2013\",\n              \"close\": 187.35\n            },\n            {\n              \"date\": \"7/4/2013\",\n              \"close\": 193.9\n            },\n            {\n              \"date\": \"7/5/2013\",\n              \"close\": 191.75\n            },\n            {\n              \"date\": \"7/8/2013\",\n              \"close\": 191.9\n            },\n            {\n              \"date\": \"7/9/2013\",\n              \"close\": 193.95\n            },\n            {\n              \"date\": \"7/10/2013\",\n              \"close\": 192.5\n            },\n            {\n              \"date\": \"7/11/2013\",\n              \"close\": 191.55\n            },\n            {\n              \"date\": \"7/12/2013\",\n              \"close\": 193.8\n            },\n            {\n              \"date\": \"7/15/2013\",\n              \"close\": 195.5\n            },\n            {\n              \"date\": \"7/16/2013\",\n              \"close\": 193.45\n            },\n            {\n              \"date\": \"7/17/2013\",\n              \"close\": 192.3\n            },\n            {\n              \"date\": \"7/18/2013\",\n              \"close\": 191.35\n            },\n            {\n              \"date\": \"7/19/2013\",\n              \"close\": 193.85\n            },\n            {\n              \"date\": \"7/22/2013\",\n              \"close\": 194\n            },\n            {\n              \"date\": \"7/23/2013\",\n              \"close\": 192.9\n            },\n            {\n              \"date\": \"7/24/2013\",\n              \"close\": 193.6\n            },\n            {\n              \"date\": \"7/25/2013\",\n              \"close\": 193.5\n            },\n            {\n              \"date\": \"7/26/2013\",\n              \"close\": 192.55\n            },\n            {\n              \"date\": \"7/29/2013\",\n              \"close\": 194.4\n            },\n            {\n              \"date\": \"7/30/2013\",\n              \"close\": 195.1\n            },\n            {\n              \"date\": \"7/31/2013\",\n              \"close\": 197.5\n            },\n            {\n              \"date\": \"8/1/2013\",\n              \"close\": 200.2\n            },\n            {\n              \"date\": \"8/2/2013\",\n              \"close\": 199.35\n            },\n            {\n              \"date\": \"8/5/2013\",\n              \"close\": 198\n            },\n            {\n              \"date\": \"8/6/2013\",\n              \"close\": 198.15\n            },\n            {\n              \"date\": \"8/7/2013\",\n              \"close\": 197.7\n            },\n            {\n              \"date\": \"8/8/2013\",\n              \"close\": 196.8\n            },\n            {\n              \"date\": \"8/9/2013\",\n              \"close\": 196.7\n            },\n            {\n              \"date\": \"8/12/2013\",\n              \"close\": 196.2\n            },\n            {\n              \"date\": \"8/13/2013\",\n              \"close\": 197.7\n            },\n            {\n              \"date\": \"8/14/2013\",\n              \"close\": 195.3\n            },\n            {\n              \"date\": \"8/15/2013\",\n              \"close\": 192.85\n            },\n            {\n              \"date\": \"8/16/2013\",\n              \"close\": 192.3\n            },\n            {\n              \"date\": \"8/19/2013\",\n              \"close\": 189.85\n            },\n            {\n              \"date\": \"8/20/2013\",\n              \"close\": 190.2\n            },\n            {\n              \"date\": \"8/21/2013\",\n              \"close\": 190\n            },\n            {\n              \"date\": \"8/22/2013\",\n              \"close\": 190.05\n            },\n            {\n              \"date\": \"8/23/2013\",\n              \"close\": 191.75\n            },\n            {\n              \"date\": \"8/26/2013\",\n              \"close\": 191.75\n            },\n            {\n              \"date\": \"8/27/2013\",\n              \"close\": 190.1\n            },\n            {\n              \"date\": \"8/28/2013\",\n              \"close\": 189.3\n            },\n            {\n              \"date\": \"8/29/2013\",\n              \"close\": 204.75\n            },\n            {\n              \"date\": \"8/30/2013\",\n              \"close\": 206.25\n            },\n            {\n              \"date\": \"9/2/2013\",\n              \"close\": 213.2\n            },\n            {\n              \"date\": \"9/3/2013\",\n              \"close\": 202.5\n            },\n            {\n              \"date\": \"9/4/2013\",\n              \"close\": 207\n            },\n            {\n              \"date\": \"9/5/2013\",\n              \"close\": 210.55\n            },\n            {\n              \"date\": \"9/6/2013\",\n              \"close\": 210.75\n            },\n            {\n              \"date\": \"9/9/2013\",\n              \"close\": 210.4\n            },\n            {\n              \"date\": \"9/10/2013\",\n              \"close\": 207.9\n            },\n            {\n              \"date\": \"9/11/2013\",\n              \"close\": 210.15\n            },\n            {\n              \"date\": \"9/12/2013\",\n              \"close\": 210.1\n            }\n          ]\n\n          var data = []\n\n        testData.forEach(function(d) {\n            data.push({\"date\": parseDate(d.date), \"close\": d.close});\n            // d.date = parseDate(d.date);\n            // d.close = +d.close;\n        });\n  \n        var bandsData = getBollingerBands(n, k, data);\n  \n        x.domain(d3.extent(data, function(d) { return d.date; }));\n        y.domain([ d3.min(bandsData, function(d) { return d.low; }),\n                   d3.max(bandsData, function(d) { return d.high; }) ]);\n  \n        svg.append(\"g\")\n                .attr(\"class\", \"x axis\")\n                .attr(\"transform\", \"translate(0,\" + height + \")\")\n                .call(xAxis);\n        svg.append(\"g\")\n                .attr(\"class\", \"y axis\")\n                .call(yAxis);\n  \n        svg.append(\"path\")\n                .datum(bandsData)\n                .attr(\"class\", \"area bands\")\n                .attr(\"d\", bandsArea);\n        svg.append(\"path\")\n                .datum(bandsData)\n                .attr(\"class\", \"line bands\")\n                .attr(\"d\", lowBand);\n        svg.append(\"path\")\n                .datum(bandsData)\n                .attr(\"class\", \"line bands\")\n                .attr(\"d\", highBand);\n        svg.append(\"path\")\n                .datum(bandsData)\n                .attr(\"class\", \"line ma bands\")\n                .attr(\"d\", ma);\n  \n        svg.append(\"path\")\n                .datum(data)\n                .attr(\"class\", \"line\")\n                .attr(\"d\", line);\n    // });\n  \n      function getBollingerBands(n, k, data) {\n          var bands = []; //{ ma: 0, low: 0, high: 0 }\n          for (var i = n - 1, len = data.length; i < len; i++) {\n              var slice = data.slice(i + 1 - n , i);\n              var mean = d3.mean(slice, function(d) { return d.close; });\n              var stdDev = Math.sqrt(d3.mean(slice.map(function(d) {\n                  return Math.pow(d.close - mean, 2);\n              })));\n              bands.push({ date: data[i].date,\n                           ma: mean,\n                           low: mean - (k * stdDev),\n                           high: mean + (k * stdDev) });\n          }\n          return bands;\n      }\n\n    }\n\n    const d3Container = useRef(null);\n\n    return (\n        <div\n            className=\"d3-lollipop-chart\"\n            width={996}\n            height={444}\n            ref={d3Container}\n        ></div>\n    );\n}\n\nexport default BollingerBands;"]},"metadata":{},"sourceType":"module"}