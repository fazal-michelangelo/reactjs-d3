{"ast":null,"code":"var _jsxFileName = \"/home/fazal/Documents/reactjs/inbox-pivot/src/App.js\";\nimport React, { useEffect } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport * as d3 from 'd3';\nimport miserableJSON from '../src/miserables.json';\nconst jsondata = miserableJSON;\n\nfunction App() {\n  var width = 800;\n  var height = 600;\n  var color = d3.scaleOrdinal(d3.schemeCategory10);\n  useEffect(() => {\n    drawChart();\n  });\n\n  function drawChart() {\n    var svg = d3.select(\"#viz\").attr(\"width\", width).attr(\"height\", height);\n    var container = svg.append(\"g\");\n    var label = {\n      'nodes': [],\n      'links': []\n    };\n    jsondata.nodes.forEach(function (d, i) {\n      label.nodes.push({\n        node: d\n      });\n      label.nodes.push({\n        node: d\n      });\n      label.links.push({\n        source: i * 2,\n        target: i * 2 + 1\n      });\n    });\n    var labelLayout = d3.forceSimulation(label.nodes).force(\"charge\", d3.forceManyBody().strength(-50)).force(\"link\", d3.forceLink(label.links).distance(0).strength(2));\n    var graphLayout = d3.forceSimulation(jsondata.nodes).force(\"charge\", d3.forceManyBody().strength(-3000)).force(\"center\", d3.forceCenter(width / 2, height / 2)).force(\"x\", d3.forceX(width / 2).strength(1)).force(\"y\", d3.forceY(height / 2).strength(1)).force(\"link\", d3.forceLink(jsondata.links).id(function (d) {\n      return d.id;\n    }).distance(50).strength(1)).on(\"tick\", ticked);\n    var adjlist = [];\n    jsondata.links.forEach(function (d) {\n      adjlist[d.source.index + \"-\" + d.target.index] = true;\n      adjlist[d.target.index + \"-\" + d.source.index] = true;\n    }); // const data = [12, 5, 6, 6, 9, 10];  \n    // const svg = d3.select(\"body\").append(\"svg\").attr(\"width\", 700).attr(\"height\", 300);\n  }\n\n  function ticked() {\n    node.call(updateNode);\n    link.call(updateLink);\n    labelLayout.alphaTarget(0.3).restart();\n    labelNode.each(function (d, i) {\n      if (i % 2 == 0) {\n        d.x = d.node.x;\n        d.y = d.node.y;\n      } else {\n        var b = this.getBBox();\n        var diffX = d.x - d.node.x;\n        var diffY = d.y - d.node.y;\n        var dist = Math.sqrt(diffX * diffX + diffY * diffY);\n        var shiftX = b.width * (diffX - dist) / (dist * 2);\n        shiftX = Math.max(-b.width, Math.min(0, shiftX));\n        var shiftY = 16;\n        this.setAttribute(\"transform\", \"translate(\" + shiftX + \",\" + shiftY + \")\");\n      }\n    });\n    labelNode.call(updateNode);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    id: \"viz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/fazal/Documents/reactjs/inbox-pivot/src/App.js"],"names":["React","useEffect","d3","miserableJSON","jsondata","App","width","height","color","scaleOrdinal","schemeCategory10","drawChart","svg","select","attr","container","append","label","nodes","forEach","d","i","push","node","links","source","target","labelLayout","forceSimulation","force","forceManyBody","strength","forceLink","distance","graphLayout","forceCenter","forceX","forceY","id","on","ticked","adjlist","index","call","updateNode","link","updateLink","alphaTarget","restart","labelNode","each","x","y","b","getBBox","diffX","diffY","dist","Math","sqrt","shiftX","max","min","shiftY","setAttribute"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport * as d3 from 'd3';\n\nimport miserableJSON from '../src/miserables.json';\n\nconst jsondata = miserableJSON;\n\nfunction App() {\n\n\n  var width = 800;\n  var height = 600;\n  var color = d3.scaleOrdinal(d3.schemeCategory10);\n\n  \nuseEffect(() => {\n  drawChart();\n});\n\n\n\n\nfunction drawChart() {\n\n  var svg = d3.select(\"#viz\").attr(\"width\", width).attr(\"height\", height);\n  var container = svg.append(\"g\");\n\n  var label = {\n    'nodes': [],\n    'links': []\n  };\n\n  jsondata.nodes.forEach(function (d, i) {\n    label.nodes.push({ node: d });\n    label.nodes.push({ node: d });\n    label.links.push({\n      source: i * 2,\n      target: i * 2 + 1\n    });\n  });\n\n\n  var labelLayout = d3.forceSimulation(label.nodes)\n  .force(\"charge\", d3.forceManyBody().strength(-50))\n  .force(\"link\", d3.forceLink(label.links).distance(0).strength(2));\n\nvar graphLayout = d3.forceSimulation(jsondata.nodes)\n  .force(\"charge\", d3.forceManyBody().strength(-3000))\n  .force(\"center\", d3.forceCenter(width / 2, height / 2))\n  .force(\"x\", d3.forceX(width / 2).strength(1))\n  .force(\"y\", d3.forceY(height / 2).strength(1))\n  .force(\"link\", d3.forceLink(jsondata.links).id(function (d) { return d.id; }).distance(50).strength(1))\n  .on(\"tick\", ticked);\n\nvar adjlist = [];\n\njsondata.links.forEach(function (d) {\n  adjlist[d.source.index + \"-\" + d.target.index] = true;\n  adjlist[d.target.index + \"-\" + d.source.index] = true;\n});\n\n\n\n  // const data = [12, 5, 6, 6, 9, 10];  \n  // const svg = d3.select(\"body\").append(\"svg\").attr(\"width\", 700).attr(\"height\", 300);\n  \n}\n\nfunction ticked() {\n\n  node.call(updateNode);\n  link.call(updateLink);\n\n  labelLayout.alphaTarget(0.3).restart();\n  labelNode.each(function (d, i) {\n    if (i % 2 == 0) {\n      d.x = d.node.x;\n      d.y = d.node.y;\n    } else {\n      var b = this.getBBox();\n\n      var diffX = d.x - d.node.x;\n      var diffY = d.y - d.node.y;\n\n      var dist = Math.sqrt(diffX * diffX + diffY * diffY);\n\n      var shiftX = b.width * (diffX - dist) / (dist * 2);\n      shiftX = Math.max(-b.width, Math.min(0, shiftX));\n      var shiftY = 16;\n      this.setAttribute(\"transform\", \"translate(\" + shiftX + \",\" + shiftY + \")\");\n    }\n  });\n  labelNode.call(updateNode);\n\n}\n\n\n  return (\n    <div className=\"App\">\n      <svg id='viz'></svg>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}