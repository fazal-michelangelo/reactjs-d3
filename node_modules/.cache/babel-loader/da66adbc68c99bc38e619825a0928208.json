{"ast":null,"code":"var _jsxFileName = \"/home/fazal/Documents/claudius/D3-charts/src/SankeyChart.js\";\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport sankey from './sankey';\n\nconst moment = require('moment');\n\nconst SankeyChart = props => {\n  useEffect(() => {\n    drawChart();\n  });\n\n  function drawChart() {\n    var data = [{\n      \"Survived\": \"Perished\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Crew\",\n      \"value\": 670\n    }, {\n      \"Survived\": \"Perished\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Third Class\",\n      \"value\": 387\n    }, {\n      \"Survived\": \"Perished\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Second Class\",\n      \"value\": 154\n    }, {\n      \"Survived\": \"Perished\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Adult\",\n      \"Class\": \"First Class\",\n      \"value\": 118\n    }, {\n      \"Survived\": \"Perished\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Child\",\n      \"Class\": \"Third Class\",\n      \"value\": 35\n    }, {\n      \"Survived\": \"Perished\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Crew\",\n      \"value\": 3\n    }, {\n      \"Survived\": \"Perished\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Third Class\",\n      \"value\": 89\n    }, {\n      \"Survived\": \"Perished\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Second Class\",\n      \"value\": 13\n    }, {\n      \"Survived\": \"Perished\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Adult\",\n      \"Class\": \"First Class\",\n      \"value\": 4\n    }, {\n      \"Survived\": \"Perished\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Child\",\n      \"Class\": \"Third Class\",\n      \"value\": 17\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Crew\",\n      \"value\": 192\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Third Class\",\n      \"value\": 75\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Second Class\",\n      \"value\": 14\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Adult\",\n      \"Class\": \"First Class\",\n      \"value\": 57\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Child\",\n      \"Class\": \"Third Class\",\n      \"value\": 13\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Child\",\n      \"Class\": \"Second Class\",\n      \"value\": 11\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Male\",\n      \"Age\": \"Child\",\n      \"Class\": \"First Class\",\n      \"value\": 5\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Crew\",\n      \"value\": 20\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Third Class\",\n      \"value\": 76\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Adult\",\n      \"Class\": \"Second Class\",\n      \"value\": 80\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Adult\",\n      \"Class\": \"First Class\",\n      \"value\": 140\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Child\",\n      \"Class\": \"Third Class\",\n      \"value\": 14\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Child\",\n      \"Class\": \"Second Class\",\n      \"value\": 13\n    }, {\n      \"Survived\": \"Survived\",\n      \"Sex\": \"Female\",\n      \"Age\": \"Child\",\n      \"Class\": \"First Class\",\n      \"value\": 1\n    }];\n    keys = data.columns.slice(0, -1);\n    color = d3.scaleOrdinal([\"Perished\"], [\"#da4f81\"]).unknown(\"#ccc\");\n    var graph = {\n      \"nodes\": [{\n        \"name\": \"Perished\"\n      }, {\n        \"name\": \"Survived\"\n      }, {\n        \"name\": \"Male\"\n      }, {\n        \"name\": \"Female\"\n      }, {\n        \"name\": \"Adult\"\n      }, {\n        \"name\": \"Child\"\n      }, {\n        \"name\": \"Crew\"\n      }, {\n        \"name\": \"Third Class\"\n      }, {\n        \"name\": \"Second Class\"\n      }, {\n        \"name\": \"First Class\"\n      }],\n      \"links\": [{\n        \"source\": 0,\n        \"target\": 2,\n        \"names\": [\"Perished\", \"Male\"],\n        \"value\": 1364\n      }, {\n        \"source\": 0,\n        \"target\": 3,\n        \"names\": [\"Perished\", \"Female\"],\n        \"value\": 126\n      }, {\n        \"source\": 1,\n        \"target\": 2,\n        \"names\": [\"Survived\", \"Male\"],\n        \"value\": 367\n      }, {\n        \"source\": 1,\n        \"target\": 3,\n        \"names\": [\"Survived\", \"Female\"],\n        \"value\": 344\n      }, {\n        \"source\": 2,\n        \"target\": 4,\n        \"names\": [\"Perished\", \"Male\", \"Adult\"],\n        \"value\": 1329\n      }, {\n        \"source\": 2,\n        \"target\": 5,\n        \"names\": [\"Perished\", \"Male\", \"Child\"],\n        \"value\": 35\n      }, {\n        \"source\": 3,\n        \"target\": 4,\n        \"names\": [\"Perished\", \"Female\", \"Adult\"],\n        \"value\": 109\n      }, {\n        \"source\": 3,\n        \"target\": 5,\n        \"names\": [\"Perished\", \"Female\", \"Child\"],\n        \"value\": 17\n      }, {\n        \"source\": 2,\n        \"target\": 4,\n        \"names\": [\"Survived\", \"Male\", \"Adult\"],\n        \"value\": 338\n      }, {\n        \"source\": 2,\n        \"target\": 5,\n        \"names\": [\"Survived\", \"Male\", \"Child\"],\n        \"value\": 29\n      }, {\n        \"source\": 3,\n        \"target\": 4,\n        \"names\": [\"Survived\", \"Female\", \"Adult\"],\n        \"value\": 316\n      }, {\n        \"source\": 3,\n        \"target\": 5,\n        \"names\": [\"Survived\", \"Female\", \"Child\"],\n        \"value\": 28\n      }, {\n        \"source\": 4,\n        \"target\": 6,\n        \"names\": [\"Perished\", \"Male\", \"Adult\", \"Crew\"],\n        \"value\": 670\n      }, {\n        \"source\": 4,\n        \"target\": 7,\n        \"names\": [\"Perished\", \"Male\", \"Adult\", \"Third Class\"],\n        \"value\": 387\n      }, {\n        \"source\": 4,\n        \"target\": 8,\n        \"names\": [\"Perished\", \"Male\", \"Adult\", \"Second Class\"],\n        \"value\": 154\n      }, {\n        \"source\": 4,\n        \"target\": 9,\n        \"names\": [\"Perished\", \"Male\", \"Adult\", \"First Class\"],\n        \"value\": 118\n      }, {\n        \"source\": 5,\n        \"target\": 7,\n        \"names\": [\"Perished\", \"Male\", \"Child\", \"Third Class\"],\n        \"value\": 35\n      }, {\n        \"source\": 4,\n        \"target\": 6,\n        \"names\": [\"Perished\", \"Female\", \"Adult\", \"Crew\"],\n        \"value\": 3\n      }, {\n        \"source\": 4,\n        \"target\": 7,\n        \"names\": [\"Perished\", \"Female\", \"Adult\", \"Third Class\"],\n        \"value\": 89\n      }, {\n        \"source\": 4,\n        \"target\": 8,\n        \"names\": [\"Perished\", \"Female\", \"Adult\", \"Second Class\"],\n        \"value\": 13\n      }, {\n        \"source\": 4,\n        \"target\": 9,\n        \"names\": [\"Perished\", \"Female\", \"Adult\", \"First Class\"],\n        \"value\": 4\n      }, {\n        \"source\": 5,\n        \"target\": 7,\n        \"names\": [\"Perished\", \"Female\", \"Child\", \"Third Class\"],\n        \"value\": 17\n      }, {\n        \"source\": 4,\n        \"target\": 6,\n        \"names\": [\"Survived\", \"Male\", \"Adult\", \"Crew\"],\n        \"value\": 192\n      }, {\n        \"source\": 4,\n        \"target\": 7,\n        \"names\": [\"Survived\", \"Male\", \"Adult\", \"Third Class\"],\n        \"value\": 75\n      }, {\n        \"source\": 4,\n        \"target\": 8,\n        \"names\": [\"Survived\", \"Male\", \"Adult\", \"Second Class\"],\n        \"value\": 14\n      }, {\n        \"source\": 4,\n        \"target\": 9,\n        \"names\": [\"Survived\", \"Male\", \"Adult\", \"First Class\"],\n        \"value\": 57\n      }, {\n        \"source\": 5,\n        \"target\": 7,\n        \"names\": [\"Survived\", \"Male\", \"Child\", \"Third Class\"],\n        \"value\": 13\n      }, {\n        \"source\": 5,\n        \"target\": 8,\n        \"names\": [\"Survived\", \"Male\", \"Child\", \"Second Class\"],\n        \"value\": 11\n      }, {\n        \"source\": 5,\n        \"target\": 9,\n        \"names\": [\"Survived\", \"Male\", \"Child\", \"First Class\"],\n        \"value\": 5\n      }, {\n        \"source\": 4,\n        \"target\": 6,\n        \"names\": [\"Survived\", \"Female\", \"Adult\", \"Crew\"],\n        \"value\": 20\n      }, {\n        \"source\": 4,\n        \"target\": 7,\n        \"names\": [\"Survived\", \"Female\", \"Adult\", \"Third Class\"],\n        \"value\": 76\n      }, {\n        \"source\": 4,\n        \"target\": 8,\n        \"names\": [\"Survived\", \"Female\", \"Adult\", \"Second Class\"],\n        \"value\": 80\n      }, {\n        \"source\": 4,\n        \"target\": 9,\n        \"names\": [\"Survived\", \"Female\", \"Adult\", \"First Class\"],\n        \"value\": 140\n      }, {\n        \"source\": 5,\n        \"target\": 7,\n        \"names\": [\"Survived\", \"Female\", \"Child\", \"Third Class\"],\n        \"value\": 14\n      }, {\n        \"source\": 5,\n        \"target\": 8,\n        \"names\": [\"Survived\", \"Female\", \"Child\", \"Second Class\"],\n        \"value\": 13\n      }, {\n        \"source\": 5,\n        \"target\": 9,\n        \"names\": [\"Survived\", \"Female\", \"Child\", \"First Class\"],\n        \"value\": 1\n      }]\n    };\n    var sankey = sankey().nodeSort(null).linkSort(null).nodeWidth(4).nodePadding(20).extent([[0, 5], [width, height - 5]]);\n  }\n\n  const svg = d3.create(\"svg\").attr(\"viewBox\", [0, 0, width, height]);\n  const {\n    nodes,\n    links\n  } = sankey({\n    nodes: graph.nodes.map(d => Object.assign({}, d)),\n    links: graph.links.map(d => Object.assign({}, d))\n  });\n  svg.append(\"g\").selectAll(\"rect\").data(nodes).join(\"rect\").attr(\"x\", d => d.x0).attr(\"y\", d => d.y0).attr(\"height\", d => d.y1 - d.y0).attr(\"width\", d => d.x1 - d.x0).append(\"title\").text(d => `${d.name}\\n${d.value.toLocaleString()}`);\n  svg.append(\"g\").attr(\"fill\", \"none\").selectAll(\"g\").data(links).join(\"path\").attr(\"d\", d3.sankeyLinkHorizontal()).attr(\"stroke\", d => color(d.names[0])).attr(\"stroke-width\", d => d.width).style(\"mix-blend-mode\", \"multiply\").append(\"title\").text(d => `${d.names.join(\" → \")}\\n${d.value.toLocaleString()}`);\n  svg.append(\"g\").style(\"font\", \"10px sans-serif\").selectAll(\"text\").data(nodes).join(\"text\").attr(\"x\", d => d.x0 < width / 2 ? d.x1 + 6 : d.x0 - 6).attr(\"y\", d => (d.y1 + d.y0) / 2).attr(\"dy\", \"0.35em\").attr(\"text-anchor\", d => d.x0 < width / 2 ? \"start\" : \"end\").text(d => d.name).append(\"tspan\").attr(\"fill-opacity\", 0.7).text(d => ` ${d.value.toLocaleString()}`);\n  return svg.node();\n  const d3Container = useRef(null);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dnif-sankey-chart\",\n    width: 996,\n    height: 644,\n    ref: d3Container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default SankeyChart;","map":{"version":3,"sources":["/home/fazal/Documents/claudius/D3-charts/src/SankeyChart.js"],"names":["React","useRef","useEffect","d3","sankey","moment","require","SankeyChart","props","drawChart","data","keys","columns","slice","color","scaleOrdinal","unknown","graph","nodeSort","linkSort","nodeWidth","nodePadding","extent","width","height","svg","create","attr","nodes","links","map","d","Object","assign","append","selectAll","join","x0","y0","y1","x1","text","name","value","toLocaleString","sankeyLinkHorizontal","names","style","node","d3Container"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';   \nimport sankey from './sankey'\nconst moment = require('moment');\n\n\nconst SankeyChart = (props) => {\n    useEffect(() => {\n        drawChart();\n    });\n\n    function drawChart() {\n\n        var data = [\n            {\n              \"Survived\": \"Perished\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Crew\",\n              \"value\": 670\n            },\n            {\n              \"Survived\": \"Perished\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Third Class\",\n              \"value\": 387\n            },\n            {\n              \"Survived\": \"Perished\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Second Class\",\n              \"value\": 154\n            },\n            {\n              \"Survived\": \"Perished\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Adult\",\n              \"Class\": \"First Class\",\n              \"value\": 118\n            },\n            {\n              \"Survived\": \"Perished\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Child\",\n              \"Class\": \"Third Class\",\n              \"value\": 35\n            },\n            {\n              \"Survived\": \"Perished\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Crew\",\n              \"value\": 3\n            },\n            {\n              \"Survived\": \"Perished\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Third Class\",\n              \"value\": 89\n            },\n            {\n              \"Survived\": \"Perished\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Second Class\",\n              \"value\": 13\n            },\n            {\n              \"Survived\": \"Perished\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Adult\",\n              \"Class\": \"First Class\",\n              \"value\": 4\n            },\n            {\n              \"Survived\": \"Perished\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Child\",\n              \"Class\": \"Third Class\",\n              \"value\": 17\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Crew\",\n              \"value\": 192\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Third Class\",\n              \"value\": 75\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Second Class\",\n              \"value\": 14\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Adult\",\n              \"Class\": \"First Class\",\n              \"value\": 57\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Child\",\n              \"Class\": \"Third Class\",\n              \"value\": 13\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Child\",\n              \"Class\": \"Second Class\",\n              \"value\": 11\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Male\",\n              \"Age\": \"Child\",\n              \"Class\": \"First Class\",\n              \"value\": 5\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Crew\",\n              \"value\": 20\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Third Class\",\n              \"value\": 76\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Adult\",\n              \"Class\": \"Second Class\",\n              \"value\": 80\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Adult\",\n              \"Class\": \"First Class\",\n              \"value\": 140\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Child\",\n              \"Class\": \"Third Class\",\n              \"value\": 14\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Child\",\n              \"Class\": \"Second Class\",\n              \"value\": 13\n            },\n            {\n              \"Survived\": \"Survived\",\n              \"Sex\": \"Female\",\n              \"Age\": \"Child\",\n              \"Class\": \"First Class\",\n              \"value\": 1\n            }\n          ];\n\n        keys = data.columns.slice(0, -1);\n\n        color = d3.scaleOrdinal([\"Perished\"], [\"#da4f81\"]).unknown(\"#ccc\")\n        \n\n        var graph = {\"nodes\":[{\"name\":\"Perished\"},{\"name\":\"Survived\"},{\"name\":\"Male\"},{\"name\":\"Female\"},{\"name\":\"Adult\"},{\"name\":\"Child\"},{\"name\":\"Crew\"},{\"name\":\"Third Class\"},{\"name\":\"Second Class\"},{\"name\":\"First Class\"}],\"links\":[{\"source\":0,\"target\":2,\"names\":[\"Perished\",\"Male\"],\"value\":1364},{\"source\":0,\"target\":3,\"names\":[\"Perished\",\"Female\"],\"value\":126},{\"source\":1,\"target\":2,\"names\":[\"Survived\",\"Male\"],\"value\":367},{\"source\":1,\"target\":3,\"names\":[\"Survived\",\"Female\"],\"value\":344},{\"source\":2,\"target\":4,\"names\":[\"Perished\",\"Male\",\"Adult\"],\"value\":1329},{\"source\":2,\"target\":5,\"names\":[\"Perished\",\"Male\",\"Child\"],\"value\":35},{\"source\":3,\"target\":4,\"names\":[\"Perished\",\"Female\",\"Adult\"],\"value\":109},{\"source\":3,\"target\":5,\"names\":[\"Perished\",\"Female\",\"Child\"],\"value\":17},{\"source\":2,\"target\":4,\"names\":[\"Survived\",\"Male\",\"Adult\"],\"value\":338},{\"source\":2,\"target\":5,\"names\":[\"Survived\",\"Male\",\"Child\"],\"value\":29},{\"source\":3,\"target\":4,\"names\":[\"Survived\",\"Female\",\"Adult\"],\"value\":316},{\"source\":3,\"target\":5,\"names\":[\"Survived\",\"Female\",\"Child\"],\"value\":28},{\"source\":4,\"target\":6,\"names\":[\"Perished\",\"Male\",\"Adult\",\"Crew\"],\"value\":670},{\"source\":4,\"target\":7,\"names\":[\"Perished\",\"Male\",\"Adult\",\"Third Class\"],\"value\":387},{\"source\":4,\"target\":8,\"names\":[\"Perished\",\"Male\",\"Adult\",\"Second Class\"],\"value\":154},{\"source\":4,\"target\":9,\"names\":[\"Perished\",\"Male\",\"Adult\",\"First Class\"],\"value\":118},{\"source\":5,\"target\":7,\"names\":[\"Perished\",\"Male\",\"Child\",\"Third Class\"],\"value\":35},{\"source\":4,\"target\":6,\"names\":[\"Perished\",\"Female\",\"Adult\",\"Crew\"],\"value\":3},{\"source\":4,\"target\":7,\"names\":[\"Perished\",\"Female\",\"Adult\",\"Third Class\"],\"value\":89},{\"source\":4,\"target\":8,\"names\":[\"Perished\",\"Female\",\"Adult\",\"Second Class\"],\"value\":13},{\"source\":4,\"target\":9,\"names\":[\"Perished\",\"Female\",\"Adult\",\"First Class\"],\"value\":4},{\"source\":5,\"target\":7,\"names\":[\"Perished\",\"Female\",\"Child\",\"Third Class\"],\"value\":17},{\"source\":4,\"target\":6,\"names\":[\"Survived\",\"Male\",\"Adult\",\"Crew\"],\"value\":192},{\"source\":4,\"target\":7,\"names\":[\"Survived\",\"Male\",\"Adult\",\"Third Class\"],\"value\":75},{\"source\":4,\"target\":8,\"names\":[\"Survived\",\"Male\",\"Adult\",\"Second Class\"],\"value\":14},{\"source\":4,\"target\":9,\"names\":[\"Survived\",\"Male\",\"Adult\",\"First Class\"],\"value\":57},{\"source\":5,\"target\":7,\"names\":[\"Survived\",\"Male\",\"Child\",\"Third Class\"],\"value\":13},{\"source\":5,\"target\":8,\"names\":[\"Survived\",\"Male\",\"Child\",\"Second Class\"],\"value\":11},{\"source\":5,\"target\":9,\"names\":[\"Survived\",\"Male\",\"Child\",\"First Class\"],\"value\":5},{\"source\":4,\"target\":6,\"names\":[\"Survived\",\"Female\",\"Adult\",\"Crew\"],\"value\":20},{\"source\":4,\"target\":7,\"names\":[\"Survived\",\"Female\",\"Adult\",\"Third Class\"],\"value\":76},{\"source\":4,\"target\":8,\"names\":[\"Survived\",\"Female\",\"Adult\",\"Second Class\"],\"value\":80},{\"source\":4,\"target\":9,\"names\":[\"Survived\",\"Female\",\"Adult\",\"First Class\"],\"value\":140},{\"source\":5,\"target\":7,\"names\":[\"Survived\",\"Female\",\"Child\",\"Third Class\"],\"value\":14},{\"source\":5,\"target\":8,\"names\":[\"Survived\",\"Female\",\"Child\",\"Second Class\"],\"value\":13},{\"source\":5,\"target\":9,\"names\":[\"Survived\",\"Female\",\"Child\",\"First Class\"],\"value\":1}]}\n\n        var sankey = sankey()\n        .nodeSort(null)\n        .linkSort(null)\n        .nodeWidth(4)\n        .nodePadding(20)\n        .extent([[0, 5], [width, height - 5]]);\n\n    }\n\n\n\n\n\n\n\n\n\n\n        const svg = d3.create(\"svg\")\n            .attr(\"viewBox\", [0, 0, width, height]);\n      \n        const {nodes, links} = sankey({\n          nodes: graph.nodes.map(d => Object.assign({}, d)),\n          links: graph.links.map(d => Object.assign({}, d))\n        });\n      \n        svg.append(\"g\")\n          .selectAll(\"rect\")\n          .data(nodes)\n          .join(\"rect\")\n            .attr(\"x\", d => d.x0)\n            .attr(\"y\", d => d.y0)\n            .attr(\"height\", d => d.y1 - d.y0)\n            .attr(\"width\", d => d.x1 - d.x0)\n          .append(\"title\")\n            .text(d => `${d.name}\\n${d.value.toLocaleString()}`);\n      \n        svg.append(\"g\")\n            .attr(\"fill\", \"none\")\n          .selectAll(\"g\")\n          .data(links)\n          .join(\"path\")\n            .attr(\"d\", d3.sankeyLinkHorizontal())\n            .attr(\"stroke\", d => color(d.names[0]))\n            .attr(\"stroke-width\", d => d.width)\n            .style(\"mix-blend-mode\", \"multiply\")\n          .append(\"title\")\n            .text(d => `${d.names.join(\" → \")}\\n${d.value.toLocaleString()}`);\n      \n        svg.append(\"g\")\n            .style(\"font\", \"10px sans-serif\")\n          .selectAll(\"text\")\n          .data(nodes)\n          .join(\"text\")\n            .attr(\"x\", d => d.x0 < width / 2 ? d.x1 + 6 : d.x0 - 6)\n            .attr(\"y\", d => (d.y1 + d.y0) / 2)\n            .attr(\"dy\", \"0.35em\")\n            .attr(\"text-anchor\", d => d.x0 < width / 2 ? \"start\" : \"end\")\n            .text(d => d.name)\n          .append(\"tspan\")\n            .attr(\"fill-opacity\", 0.7)\n            .text(d => ` ${d.value.toLocaleString()}`);\n      \n        return svg.node();\n      \n\n      \n\n    const d3Container = useRef(null);\n\n    return (\n        <div\n            className=\"dnif-sankey-chart\"\n            width={996}\n            height={644}\n            ref={d3Container}\n        ></div>\n    );\n}\n\nexport default SankeyChart;"]},"metadata":{},"sourceType":"module"}