{"ast":null,"code":"var _jsxFileName = \"/home/fazal/Documents/claudius/D3-charts/src/LollipopChart.js\";\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\n\nconst moment = require('moment');\n\nconst LollipopChart = props => {\n  useEffect(() => {\n    drawChart();\n  });\n\n  function drawChart() {\n    var margin = {\n      top: 30,\n      right: 30,\n      bottom: 70,\n      left: 60\n    },\n        width = 460 - margin.left - margin.right,\n        height = 400 - margin.top - margin.bottom;\n    var data = [{\n      \"group\": \"2010-10-20\",\n      \"count\": 12,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"male\",\n      \"peopleCount\": 8,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 4\n    }, {\n      \"group\": \"2011-10-20\",\n      \"count\": 1123,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"male\",\n      \"peopleCount\": 8,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 4\n    }, {\n      \"group\": \"2012-10-20\",\n      \"count\": 96,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"male\",\n      \"peopleCount\": 8,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 2\n    }, {\n      \"group\": \"2013-10-20\",\n      \"count\": 3236,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"male\",\n      \"peopleCount\": 8,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 3\n    }, {\n      \"group\": \"2014-10-20\",\n      \"count\": 169,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }, {\n      \"group\": \"2015-10-20\",\n      \"count\": 288,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }, {\n      \"group\": \"2016-10-20\",\n      \"count\": 169,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }, {\n      \"group\": \"2017-10-20\",\n      \"count\": 99,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }, {\n      \"group\": \"2018-10-20\",\n      \"count\": 15,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }, {\n      \"group\": \"2019-10-20\",\n      \"count\": 2169,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }];\n    var empArr = [2, 4, 6, 8, 10, 12, 18, 24];\n    var color = d3.scaleThreshold().domain(empArr).range([\"#bdbdbd\", \"#9eaeba\", \"#3f80b2\", \"#2f79b0\", \"#106aad\", \"#0062ac\"]); // .range([\"#bdbdbd\", \"#9eaeba\", \"#7e9fb7\", \"#5e90b4\", \"#4f88b3\", \"#3f80b2\", \"#2f79b0\", \"#106aad\", \"#0062ac\"]);\n\n    const svg = d3.select(d3Container.current).append(\"svg\").attr('id', 'Chart').attr(\"width\", '100%').attr(\"height\", 500).attr('transform', 'translate(0, 100)');\n    let toggleAxisBoolean = true;\n    let axisDisplay = 'block';\n    svg.append('text').attr('id', 'toggleAxis').text('anyVal').attr('transform', 'translate(100, 100)'); // svg.append(\"svg\")\n    //     .attr(\"width\", width + margin.left + margin.right)\n    //     .attr(\"height\", height + margin.top + margin.bottom)\n    //     .attr('fill', '#0000ff')\n    //     .append(\"g\")\n    //     .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    d3.select('#toggleAxis').on('click', function () {\n      console.log('YO YO HONEY SINGH');\n      toggleAxisBoolean = !toggleAxisBoolean;\n      toggleAxisBoolean ? axisDisplay = 'block' : axisDisplay = 'none';\n    }); //         var svg = d3.select(\"body\")\n    //   .append(\"svg\")\n    //   .attr(\"width\", 500)\n    //   .attr(\"height\", 100);\n    // var data = d3.range(200);\n    // var xScale = d3.scaleBand()\n    //   .domain(data.map(function(d){ return d}))\n    //   .range([10, 490]);\n    // var xAxis = d3.axisBottom(xScale)\n    //   .tickValues(xScale.domain().filter(function(d,i){ return !(i%10)}));\n    // var gX = svg.append(\"g\").call(xAxis);\n\n    var x = d3.scaleBand().domain(data.map(function (d) {\n      return d.group;\n    })).range([0, width]).padding(1);\n    var xAxis = svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\");\n    var xAxisVar = d3.scaleBand().domain(['01-2010', '04-2012', '08-2018', '12-2020']).range([0, width]); // x.domain(data.map(function (d) { return d.group; }))\n\n    var xAxis = d3.axisBottom(x).tickValues(x.domain().filter(function (d, i) {\n      return !(i % 5);\n    }));\n    svg.append(\"g\").attr('id', 'xAxisID').attr(\"transform\", \"translate(\" + margin.left + \",\" + height + \")\").call(xAxis) // .call(d3.axisBottom(x).ticks(5))\n    // .call(d3.axisBottom(x).ticks(5))\n    .selectAll(\"text\") // .attr(\"transform\", \"translate(-10,20)rotate(-90)\")\n    .style(\"text-anchor\", \"start\").attr('x', 10).style('display', axisDisplay);\n    var y = d3.scaleLinear().range([height, 0]);\n    var yAxis = svg.append(\"g\").attr('transform', 'translate(' + margin.left + ' , 0)');\n    y.domain([0, d3.max(data, function (d) {\n      return +d['count'] * 1.2;\n    })]);\n    yAxis.transition().duration(1000).call(d3.axisLeft(y)).style('display', 'none');\n    let count_only = [];\n\n    for (var i = 0; i < data.length; i++) {\n      count_only.push(data[i].count);\n    }\n\n    var max_count = d3.max(d3.values(count_only));\n    var radius = d3.scaleSqrt().domain([0, max_count]).range([3, 64]);\n    var u = svg.selectAll(\"circle\").data(data);\n    u.enter().append('g').append(\"circle\").attr('fill-opacity', 0.5).attr('class', function (data) {\n      return 'circle-category circle-' + data.count;\n    }).attr('id', function (data) {\n      return 'circle-' + data.id;\n    }).on('mouseover', function (d, i) {\n      d3.select(this).attr(\"r\", function (d) {\n        return radius(d.count) + 20;\n      }).attr('fill-opacity', 1);\n      d3.select(this.parentNode).append('text').attr(\"x\", function (d) {\n        return x(d.group);\n      }).attr(\"y\", function (d) {\n        return y(d['count']);\n      }).text(function (d) {\n        return d['count'];\n      }); // d3.select('#'+d.g)\n      // d3.select(\"#04-2013\")\n      // .style('display', 'none')\n\n      d3.select(\"#xAxisVerticalLine\" + i).style(\"display\", \"block\");\n    }).on('mouseout', function (d, i) {\n      d3.select(this).attr(\"r\", function (d) {\n        return radius(d.count);\n      }).attr('fill-opacity', 0.5);\n      d3.select(this.parentNode).select('text').remove();\n      d3.select(\"#xAxisVerticalLine\" + i).style(\"display\", \"none\");\n    }).merge(u).transition().attr('transform', 'translate(' + margin.left + ', -80)').duration(1000).attr(\"cx\", function (d) {\n      return x(d.group);\n    }).attr(\"cy\", function (d) {\n      return y(0);\n    }).attr(\"r\", function (d) {\n      return radius(d.count);\n    }) // .attr(\"r\", function (d) { return Math.round((Math.pow(d['count'], 1)) * Math.PI / 2) })\n    .style(\"fill\", function (d) {\n      return d.count ? color(d.count) : undefined;\n    });\n    d3.selectAll(\"g.tick line\").attr('y2', 20);\n    var j = svg.selectAll(\".myLine\").data(data);\n    j.enter().append(\"line\").attr('id', function (d, i) {\n      return \"xAxisVerticalLine\" + i;\n    }).attr(\"class\", \"myLine\").merge(j).transition().attr('transform', 'translate(' + margin.left + ', 0)').duration(1000).attr(\"x1\", function (d) {\n      console.log(x(d.group));\n      return x(d.group);\n    }).attr(\"x2\", function (d) {\n      return x(d.group);\n    }).attr(\"y1\", y(0)).attr(\"y2\", function (d) {\n      return y(200);\n    }) // .attr(\"y2\", function(d) { return y(d['count']); })\n    .attr(\"stroke\", \"grey\").style('display', 'none');\n  }\n\n  const d3Container = useRef(null);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d3-lollipop-chart\",\n    width: 996,\n    height: 444,\n    ref: d3Container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default LollipopChart;","map":{"version":3,"sources":["/home/fazal/Documents/claudius/D3-charts/src/LollipopChart.js"],"names":["React","useRef","useEffect","d3","moment","require","LollipopChart","props","drawChart","margin","top","right","bottom","left","width","height","data","empArr","color","scaleThreshold","domain","range","svg","select","d3Container","current","append","attr","toggleAxisBoolean","axisDisplay","text","on","console","log","x","scaleBand","map","d","group","padding","xAxis","xAxisVar","axisBottom","tickValues","filter","i","call","selectAll","style","y","scaleLinear","yAxis","max","transition","duration","axisLeft","count_only","length","push","count","max_count","values","radius","scaleSqrt","u","enter","id","parentNode","remove","merge","undefined","j"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nconst moment = require('moment');\n\n\nconst LollipopChart = (props) => {\n    useEffect(() => {\n        drawChart();\n    });\n\n    function drawChart() {\n\n        var margin = { top: 30, right: 30, bottom: 70, left: 60 },\n            width = 460 - margin.left - margin.right,\n            height = 400 - margin.top - margin.bottom;\n\n        var data = [\n            {\n                \"group\": \"2010-10-20\",\n                \"count\": 12,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"male\",\n                \"peopleCount\": 8,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 4\n            },\n            {\n                \"group\": \"2011-10-20\",\n                \"count\": 1123,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"male\",\n                \"peopleCount\": 8,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 4\n            },\n            {\n                \"group\": \"2012-10-20\",\n                \"count\": 96,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"male\",\n                \"peopleCount\": 8,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 2\n            },\n            {\n                \"group\": \"2013-10-20\",\n                \"count\": 3236,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"male\",\n                \"peopleCount\": 8,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 3\n            },\n            {\n                \"group\": \"2014-10-20\",\n                \"count\": 169,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n            {\n                \"group\": \"2015-10-20\",\n                \"count\": 288,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n            {\n                \"group\": \"2016-10-20\",\n                \"count\": 169,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n            {\n                \"group\": \"2017-10-20\",\n                \"count\": 99,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n            {\n                \"group\": \"2018-10-20\",\n                \"count\": 15,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n            {\n                \"group\": \"2019-10-20\",\n                \"count\": 2169,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n        ];\n\n        var empArr = [2, 4, 6, 8, 10, 12, 18, 24];\n        var color = d3.scaleThreshold()\n            .domain(empArr)\n            .range([\"#bdbdbd\", \"#9eaeba\", \"#3f80b2\", \"#2f79b0\", \"#106aad\", \"#0062ac\"]);\n            // .range([\"#bdbdbd\", \"#9eaeba\", \"#7e9fb7\", \"#5e90b4\", \"#4f88b3\", \"#3f80b2\", \"#2f79b0\", \"#106aad\", \"#0062ac\"]);\n\n\n        const svg = d3.select(d3Container.current).append(\"svg\").attr('id', 'Chart').attr(\"width\", '100%').attr(\"height\", 500).attr('transform', 'translate(0, 100)');\n\n        let toggleAxisBoolean = true;\n        let axisDisplay = 'block';\n\n        svg.append('text')\n        .attr('id', 'toggleAxis')\n        .text('anyVal')\n        .attr('transform', 'translate(100, 100)')\n\n        // svg.append(\"svg\")\n        //     .attr(\"width\", width + margin.left + margin.right)\n        //     .attr(\"height\", height + margin.top + margin.bottom)\n        //     .attr('fill', '#0000ff')\n        //     .append(\"g\")\n        //     .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        d3.select('#toggleAxis').on('click',function() {\n            console.log('YO YO HONEY SINGH');\n            toggleAxisBoolean = !toggleAxisBoolean\n            toggleAxisBoolean ? axisDisplay = 'block' : axisDisplay = 'none';\n        })\n\n\n//         var svg = d3.select(\"body\")\n//   .append(\"svg\")\n//   .attr(\"width\", 500)\n//   .attr(\"height\", 100);\n\n// var data = d3.range(200);\n\n// var xScale = d3.scaleBand()\n//   .domain(data.map(function(d){ return d}))\n//   .range([10, 490]);\n\n// var xAxis = d3.axisBottom(xScale)\n//   .tickValues(xScale.domain().filter(function(d,i){ return !(i%10)}));\n\n// var gX = svg.append(\"g\").call(xAxis);\n\n\n        var x = d3.scaleBand()\n        .domain(data.map(function (d) { return d.group; }))\n            .range([0, width])\n            .padding(1);\n        var xAxis = svg.append(\"g\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n\n        var xAxisVar = d3.scaleBand()\n            .domain(['01-2010', '04-2012', '08-2018', '12-2020'])\n            .range([0, width]);\n\n        // x.domain(data.map(function (d) { return d.group; }))\n\n        var xAxis = d3.axisBottom(x)\n  .tickValues(x.domain().filter(function(d,i){ return !(i%5)}));\n\n        svg.append(\"g\")\n            .attr('id', 'xAxisID')\n            .attr(\"transform\", \"translate(\"+margin.left+\",\" + (height) + \")\")\n            .call(xAxis)\n            // .call(d3.axisBottom(x).ticks(5))\n            // .call(d3.axisBottom(x).ticks(5))\n            .selectAll(\"text\")\n            // .attr(\"transform\", \"translate(-10,20)rotate(-90)\")\n            .style(\"text-anchor\", \"start\")\n            .attr('x', 10)\n            .style('display', axisDisplay )\n\n\n        var y = d3.scaleLinear()\n            .range([height, 0]);\n        var yAxis = svg.append(\"g\")\n        .attr('transform', 'translate(' + margin.left + ' , 0)')\n\n        y.domain([0, d3.max(data, function (d) { return +d['count']*1.2 })]);\n        yAxis.transition().duration(1000)\n        .call(d3.axisLeft(y))\n        .style('display', 'none');\n\n\n        let count_only = [];\n\n        for(var i = 0; i < data.length; i++) {\n            count_only.push(data[i].count)\n        }\n\n        var max_count = d3.max(d3.values(count_only));\n        var radius = d3.scaleSqrt()\n            .domain([0, max_count])\n            .range([3, 64]);\n\n\n\n\n        var u = svg.selectAll(\"circle\")\n            .data(data)\n\n        u\n            .enter()\n            .append('g')\n            .append(\"circle\")\n            .attr('fill-opacity', 0.5)\n            .attr('class', function (data) { return ('circle-category circle-' + data.count) })\n            .attr('id', function (data) {\n                return 'circle-' + data.id\n            })\n\n            .on('mouseover', function (d, i) {\n                d3.select(this)\n                .attr(\"r\", function (d) { return radius(d.count) + 20 })\n                .attr('fill-opacity', 1)\n                \n                d3.select(this.parentNode).append('text')                \n                .attr(\"x\", function (d) { return x(d.group) })\n                .attr(\"y\", function (d) { return y(d['count']) })\n                .text(function(d) { return d['count'] });\n\n                // d3.select('#'+d.g)\n                // d3.select(\"#04-2013\")\n                // .style('display', 'none')\n\n                d3.select(\"#xAxisVerticalLine\"+i).style(\"display\", \"block\");\n\n            })\n\n            .on('mouseout', function (d, i) {\n                d3.select(this)\n                .attr(\"r\", function (d) { return radius(d.count)})\n                .attr('fill-opacity', 0.5)\n\n                d3.select(this.parentNode).select('text').remove();\n\n                d3.select(\"#xAxisVerticalLine\"+i).style(\"display\", \"none\");\n            })\n\n            .merge(u)\n            .transition()\n            .attr('transform', 'translate('+ margin.left +', -80)')\n            .duration(1000)\n            .attr(\"cx\", function (d) { return x(d.group) })\n            .attr(\"cy\", function (d) { return y(0) })\n\n\n            .attr(\"r\", function (d) {\n                return radius(d.count)\n            })\n\n            // .attr(\"r\", function (d) { return Math.round((Math.pow(d['count'], 1)) * Math.PI / 2) })\n\n            .style(\"fill\", function (d) {\n                return d.count ? color(d.count) : undefined;\n            })\n\n            d3.selectAll(\"g.tick line\")\n            .attr('y2', 20)\n\n\n    var j = svg.selectAll(\".myLine\")\n      .data(data)\n    j\n      .enter()\n      .append(\"line\")\n      .attr('id', function(d, i) {return \"xAxisVerticalLine\"+i})\n      .attr(\"class\", \"myLine\")\n      .merge(j)\n      .transition()\n      .attr('transform', 'translate('+margin.left+', 0)')\n      .duration(1000)\n        .attr(\"x1\", function(d) { console.log(x(d.group)) ; return x(d.group); })\n        .attr(\"x2\", function(d) { return x(d.group); })\n        .attr(\"y1\", y(0))\n        .attr(\"y2\", function(d) { return y(200) })\n        // .attr(\"y2\", function(d) { return y(d['count']); })\n        .attr(\"stroke\", \"grey\")\n        .style('display', 'none')\n\n\n    }\n\n    const d3Container = useRef(null);\n\n    return (\n        <div\n            className=\"d3-lollipop-chart\"\n            width={996}\n            height={444}\n            ref={d3Container}\n        ></div>\n    );\n}\n\nexport default LollipopChart;"]},"metadata":{},"sourceType":"module"}