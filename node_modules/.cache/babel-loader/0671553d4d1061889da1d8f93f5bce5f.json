{"ast":null,"code":"var _jsxFileName = \"/home/fazal/Documents/claudius/D3-charts/src/BollingerBands2.js\";\n\n/* eslint-disable no-unused-expressions */\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { lab } from 'd3';\n\nconst moment = require('moment');\n\nconst BollingerBands = props => {\n  useEffect(() => {\n    drawChart();\n  });\n\n  function drawChart() {\n    var margin = {\n      top: 20,\n      right: 20,\n      bottom: 30,\n      left: 50\n    },\n        width = 960 - margin.left - margin.right,\n        height = 500 - margin.top - margin.bottom;\n    var parseDate = d3.timeParse(\"%d-%b-%y\");\n    var x = techan.scale.financetime().range([0, width]);\n    var y = d3.scaleLinear().range([height, 0]);\n    var ohlc = techan.plot.ohlc().xScale(x).yScale(y);\n    var bollinger = techan.plot.bollinger().xScale(x).yScale(y);\n    var xAxis = d3.axisBottom(x);\n    var yAxis = d3.axisLeft(y).tickFormat(d3.format(\",.3s\"));\n    var svg = d3.select(\"body\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    d3.csv(\"data.csv\", function (error, data) {\n      var accessor = bollinger.accessor();\n      data = data.map(function (d) {\n        // Open, high, low, close generally not required, is being used here to demonstrate colored volume\n        // bars\n        return {\n          date: parseDate(d.Date),\n          volume: +d.Volume,\n          open: +d.Open,\n          high: +d.High,\n          low: +d.Low,\n          close: +d.Close\n        };\n      }).sort(function (a, b) {\n        return d3.ascending(accessor.d(a), accessor.d(b));\n      });\n      svg.append(\"g\").attr(\"class\", \"ohlc\");\n      svg.append(\"g\").attr(\"class\", \"bollinger\");\n      svg.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + height + \")\");\n      svg.append(\"g\").attr(\"class\", \"y axis\").append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", 6).attr(\"dy\", \".71em\").style(\"text-anchor\", \"end\").text(\"Bollinger Bands\"); // Data to display initially\n\n      draw(data.slice(0, data.length - 20)); // Only want this button to be active if the data has loaded\n\n      d3.select(\"button\").on(\"click\", function () {\n        draw(data);\n      }).style(\"display\", \"inline\");\n    });\n\n    function draw(data) {\n      var bollingerData = techan.indicator.bollinger()(data);\n      x.domain(bollingerData.map(bollinger.accessor().d));\n      y.domain(techan.scale.plot.bollinger(bollingerData).domain());\n      svg.selectAll(\"g.ohlc\").datum(data.slice(20, data.length)).call(ohlc);\n      svg.selectAll(\"g.bollinger\").datum(bollingerData).call(bollinger);\n      svg.selectAll(\"g.x.axis\").call(xAxis);\n      svg.selectAll(\"g.y.axis\").call(yAxis);\n    }\n  }\n\n  const d3Container = useRef(null);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d3-lollipop-chart\",\n    width: 996,\n    height: 444,\n    ref: d3Container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default BollingerBands;","map":{"version":3,"sources":["/home/fazal/Documents/claudius/D3-charts/src/BollingerBands2.js"],"names":["React","useRef","useEffect","d3","lab","moment","require","BollingerBands","props","drawChart","margin","top","right","bottom","left","width","height","parseDate","timeParse","x","techan","scale","financetime","range","y","scaleLinear","ohlc","plot","xScale","yScale","bollinger","xAxis","axisBottom","yAxis","axisLeft","tickFormat","format","svg","select","append","attr","csv","error","data","accessor","map","d","date","Date","volume","Volume","open","Open","high","High","low","Low","close","Close","sort","a","b","ascending","style","text","draw","slice","length","on","bollingerData","indicator","domain","selectAll","datum","call","d3Container"],"mappings":";;AAAA;AAEA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,SAAxB,QAAyC,OAAzC;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,SAASC,GAAT,QAAoB,IAApB;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AAGA,MAAMC,cAAc,GAAIC,KAAD,IAAW;AAC9BN,EAAAA,SAAS,CAAC,MAAM;AACZO,IAAAA,SAAS;AACZ,GAFQ,CAAT;;AAIA,WAASA,SAAT,GAAqB;AACjB,QAAIC,MAAM,GAAG;AAACC,MAAAA,GAAG,EAAE,EAAN;AAAUC,MAAAA,KAAK,EAAE,EAAjB;AAAqBC,MAAAA,MAAM,EAAE,EAA7B;AAAiCC,MAAAA,IAAI,EAAE;AAAvC,KAAb;AAAA,QACAC,KAAK,GAAG,MAAML,MAAM,CAACI,IAAb,GAAoBJ,MAAM,CAACE,KADnC;AAAA,QAEAI,MAAM,GAAG,MAAMN,MAAM,CAACC,GAAb,GAAmBD,MAAM,CAACG,MAFnC;AAIR,QAAII,SAAS,GAAGd,EAAE,CAACe,SAAH,CAAa,UAAb,CAAhB;AAEA,QAAIC,CAAC,GAAGC,MAAM,CAACC,KAAP,CAAaC,WAAb,GACCC,KADD,CACO,CAAC,CAAD,EAAIR,KAAJ,CADP,CAAR;AAGA,QAAIS,CAAC,GAAGrB,EAAE,CAACsB,WAAH,GACCF,KADD,CACO,CAACP,MAAD,EAAS,CAAT,CADP,CAAR;AAGA,QAAIU,IAAI,GAAGN,MAAM,CAACO,IAAP,CAAYD,IAAZ,GACFE,MADE,CACKT,CADL,EAEFU,MAFE,CAEKL,CAFL,CAAX;AAIA,QAAIM,SAAS,GAAGV,MAAM,CAACO,IAAP,CAAYG,SAAZ,GACPF,MADO,CACAT,CADA,EAEPU,MAFO,CAEAL,CAFA,CAAhB;AAIA,QAAIO,KAAK,GAAG5B,EAAE,CAAC6B,UAAH,CAAcb,CAAd,CAAZ;AAEA,QAAIc,KAAK,GAAG9B,EAAE,CAAC+B,QAAH,CAAYV,CAAZ,EACHW,UADG,CACQhC,EAAE,CAACiC,MAAH,CAAU,MAAV,CADR,CAAZ;AAGA,QAAIC,GAAG,GAAGlC,EAAE,CAACmC,MAAH,CAAU,MAAV,EAAkBC,MAAlB,CAAyB,KAAzB,EACDC,IADC,CACI,OADJ,EACazB,KAAK,GAAGL,MAAM,CAACI,IAAf,GAAsBJ,MAAM,CAACE,KAD1C,EAED4B,IAFC,CAEI,QAFJ,EAEcxB,MAAM,GAAGN,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,MAF3C,EAGL0B,MAHK,CAGE,GAHF,EAIDC,IAJC,CAII,WAJJ,EAIiB,eAAe9B,MAAM,CAACI,IAAtB,GAA6B,GAA7B,GAAmCJ,MAAM,CAACC,GAA1C,GAAgD,GAJjE,CAAV;AAMAR,IAAAA,EAAE,CAACsC,GAAH,CAAO,UAAP,EAAmB,UAASC,KAAT,EAAgBC,IAAhB,EAAsB;AACrC,UAAIC,QAAQ,GAAGd,SAAS,CAACc,QAAV,EAAf;AAEAD,MAAAA,IAAI,GAAGA,IAAI,CAACE,GAAL,CAAS,UAASC,CAAT,EAAY;AACxB;AACA;AACA,eAAO;AACHC,UAAAA,IAAI,EAAE9B,SAAS,CAAC6B,CAAC,CAACE,IAAH,CADZ;AAEHC,UAAAA,MAAM,EAAE,CAACH,CAAC,CAACI,MAFR;AAGHC,UAAAA,IAAI,EAAE,CAACL,CAAC,CAACM,IAHN;AAIHC,UAAAA,IAAI,EAAE,CAACP,CAAC,CAACQ,IAJN;AAKHC,UAAAA,GAAG,EAAE,CAACT,CAAC,CAACU,GALL;AAMHC,UAAAA,KAAK,EAAE,CAACX,CAAC,CAACY;AANP,SAAP;AAQH,OAXM,EAWJC,IAXI,CAWC,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAAE,eAAO1D,EAAE,CAAC2D,SAAH,CAAalB,QAAQ,CAACE,CAAT,CAAWc,CAAX,CAAb,EAA4BhB,QAAQ,CAACE,CAAT,CAAWe,CAAX,CAA5B,CAAP;AAAoD,OAXtE,CAAP;AAaAxB,MAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EACSC,IADT,CACc,OADd,EACuB,MADvB;AAGAH,MAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EACSC,IADT,CACc,OADd,EACuB,WADvB;AAGAH,MAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EACSC,IADT,CACc,OADd,EACuB,QADvB,EAESA,IAFT,CAEc,WAFd,EAE2B,iBAAiBxB,MAAjB,GAA0B,GAFrD;AAIAqB,MAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EACSC,IADT,CACc,OADd,EACuB,QADvB,EAEKD,MAFL,CAEY,MAFZ,EAGSC,IAHT,CAGc,WAHd,EAG2B,aAH3B,EAISA,IAJT,CAIc,GAJd,EAImB,CAJnB,EAKSA,IALT,CAKc,IALd,EAKoB,OALpB,EAMSuB,KANT,CAMe,aANf,EAM8B,KAN9B,EAOSC,IAPT,CAOc,iBAPd,EA1BqC,CAmCrC;;AACAC,MAAAA,IAAI,CAACtB,IAAI,CAACuB,KAAL,CAAW,CAAX,EAAcvB,IAAI,CAACwB,MAAL,GAAY,EAA1B,CAAD,CAAJ,CApCqC,CAqCrC;;AACAhE,MAAAA,EAAE,CAACmC,MAAH,CAAU,QAAV,EAAoB8B,EAApB,CAAuB,OAAvB,EAAgC,YAAW;AAAEH,QAAAA,IAAI,CAACtB,IAAD,CAAJ;AAAa,OAA1D,EAA4DoB,KAA5D,CAAkE,SAAlE,EAA6E,QAA7E;AACH,KAvCD;;AAyCA,aAASE,IAAT,CAActB,IAAd,EAAoB;AAChB,UAAI0B,aAAa,GAAGjD,MAAM,CAACkD,SAAP,CAAiBxC,SAAjB,GAA6Ba,IAA7B,CAApB;AACAxB,MAAAA,CAAC,CAACoD,MAAF,CAASF,aAAa,CAACxB,GAAd,CAAkBf,SAAS,CAACc,QAAV,GAAqBE,CAAvC,CAAT;AACAtB,MAAAA,CAAC,CAAC+C,MAAF,CAASnD,MAAM,CAACC,KAAP,CAAaM,IAAb,CAAkBG,SAAlB,CAA4BuC,aAA5B,EAA2CE,MAA3C,EAAT;AAEAlC,MAAAA,GAAG,CAACmC,SAAJ,CAAc,QAAd,EAAwBC,KAAxB,CAA8B9B,IAAI,CAACuB,KAAL,CAAW,EAAX,EAAevB,IAAI,CAACwB,MAApB,CAA9B,EAA2DO,IAA3D,CAAgEhD,IAAhE;AACAW,MAAAA,GAAG,CAACmC,SAAJ,CAAc,aAAd,EAA6BC,KAA7B,CAAmCJ,aAAnC,EAAkDK,IAAlD,CAAuD5C,SAAvD;AACAO,MAAAA,GAAG,CAACmC,SAAJ,CAAc,UAAd,EAA0BE,IAA1B,CAA+B3C,KAA/B;AACAM,MAAAA,GAAG,CAACmC,SAAJ,CAAc,UAAd,EAA0BE,IAA1B,CAA+BzC,KAA/B;AACH;AAEI;;AAED,QAAM0C,WAAW,GAAG1E,MAAM,CAAC,IAAD,CAA1B;AAEA,sBACI;AACI,IAAA,SAAS,EAAC,mBADd;AAEI,IAAA,KAAK,EAAE,GAFX;AAGI,IAAA,MAAM,EAAE,GAHZ;AAII,IAAA,GAAG,EAAE0E,WAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAQH,CArGD;;AAuGA,eAAepE,cAAf","sourcesContent":["/* eslint-disable no-unused-expressions */\n\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { lab } from 'd3';\nconst moment = require('moment');\n\n\nconst BollingerBands = (props) => {\n    useEffect(() => {\n        drawChart();\n    });\n\n    function drawChart() {\n        var margin = {top: 20, right: 20, bottom: 30, left: 50},\n        width = 960 - margin.left - margin.right,\n        height = 500 - margin.top - margin.bottom;\n\nvar parseDate = d3.timeParse(\"%d-%b-%y\");\n\nvar x = techan.scale.financetime()\n        .range([0, width]);\n\nvar y = d3.scaleLinear()\n        .range([height, 0]);\n\nvar ohlc = techan.plot.ohlc()\n        .xScale(x)\n        .yScale(y);\n\nvar bollinger = techan.plot.bollinger()\n        .xScale(x)\n        .yScale(y);\n\nvar xAxis = d3.axisBottom(x);\n\nvar yAxis = d3.axisLeft(y)\n        .tickFormat(d3.format(\",.3s\"));\n\nvar svg = d3.select(\"body\").append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\nd3.csv(\"data.csv\", function(error, data) {\n    var accessor = bollinger.accessor();\n\n    data = data.map(function(d) {\n        // Open, high, low, close generally not required, is being used here to demonstrate colored volume\n        // bars\n        return {\n            date: parseDate(d.Date),\n            volume: +d.Volume,\n            open: +d.Open,\n            high: +d.High,\n            low: +d.Low,\n            close: +d.Close\n        };\n    }).sort(function(a, b) { return d3.ascending(accessor.d(a), accessor.d(b)); });\n\n    svg.append(\"g\")\n            .attr(\"class\", \"ohlc\");\n\n    svg.append(\"g\")\n            .attr(\"class\", \"bollinger\");\n\n    svg.append(\"g\")\n            .attr(\"class\", \"x axis\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\");\n\n    svg.append(\"g\")\n            .attr(\"class\", \"y axis\")\n        .append(\"text\")\n            .attr(\"transform\", \"rotate(-90)\")\n            .attr(\"y\", 6)\n            .attr(\"dy\", \".71em\")\n            .style(\"text-anchor\", \"end\")\n            .text(\"Bollinger Bands\");\n\n    // Data to display initially\n    draw(data.slice(0, data.length-20));\n    // Only want this button to be active if the data has loaded\n    d3.select(\"button\").on(\"click\", function() { draw(data); }).style(\"display\", \"inline\");\n});\n\nfunction draw(data) {\n    var bollingerData = techan.indicator.bollinger()(data);\n    x.domain(bollingerData.map(bollinger.accessor().d));\n    y.domain(techan.scale.plot.bollinger(bollingerData).domain());\n\n    svg.selectAll(\"g.ohlc\").datum(data.slice(20, data.length)).call(ohlc);\n    svg.selectAll(\"g.bollinger\").datum(bollingerData).call(bollinger);\n    svg.selectAll(\"g.x.axis\").call(xAxis);\n    svg.selectAll(\"g.y.axis\").call(yAxis);\n}\n\n    }\n\n    const d3Container = useRef(null);\n\n    return (\n        <div\n            className=\"d3-lollipop-chart\"\n            width={996}\n            height={444}\n            ref={d3Container}\n        ></div>\n    );\n}\n\nexport default BollingerBands;"]},"metadata":{},"sourceType":"module"}