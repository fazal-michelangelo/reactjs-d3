{"ast":null,"code":"var _jsxFileName = \"/home/fazal/Documents/reactjs/inbox-pivot/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport * as d3 from 'd3';\n\nfunction App() {\n  var width = 800;\n  var height = 600;\n  var color = d3.scaleOrdinal(d3.schemeCategory10);\n  d3.json(dataStructure).then(function (graph) {\n    var label = {\n      'nodes': [],\n      'links': []\n    };\n    graph.nodes.forEach(function (d, i) {\n      label.nodes.push({\n        node: d\n      });\n      label.nodes.push({\n        node: d\n      });\n      label.links.push({\n        source: i * 2,\n        target: i * 2 + 1\n      });\n    });\n    var labelLayout = d3.forceSimulation(label.nodes).force(\"charge\", d3.forceManyBody().strength(-50)).force(\"link\", d3.forceLink(label.links).distance(0).strength(2));\n    var graphLayout = d3.forceSimulation(graph.nodes).force(\"charge\", d3.forceManyBody().strength(-3000)).force(\"center\", d3.forceCenter(width / 2, height / 2)).force(\"x\", d3.forceX(width / 2).strength(1)).force(\"y\", d3.forceY(height / 2).strength(1)).force(\"link\", d3.forceLink(graph.links).id(function (d) {\n      return d.id;\n    }).distance(50).strength(1)).on(\"tick\", ticked);\n    var adjlist = [];\n    graph.links.forEach(function (d) {\n      adjlist[d.source.index + \"-\" + d.target.index] = true;\n      adjlist[d.target.index + \"-\" + d.source.index] = true;\n    });\n\n    function neigh(a, b) {\n      return a == b || adjlist[a + \"-\" + b];\n    }\n\n    var svg = d3.select(\"#viz\").attr(\"width\", width).attr(\"height\", height);\n    var container = svg.append(\"g\");\n    svg.call(d3.zoom().scaleExtent([.1, 4]).on(\"zoom\", function () {\n      container.attr(\"transform\", d3.event.transform);\n    }));\n    var link = container.append(\"g\").attr(\"class\", \"links\").selectAll(\"line\").data(graph.links).enter().append(\"line\").attr(\"stroke\", \"#aaa\").attr(\"stroke-width\", \"1px\");\n    var node = container.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"g\").data(graph.nodes).enter().append(\"circle\").attr(\"r\", 5).attr(\"fill\", function (d) {\n      return color(d.group);\n    });\n    node.on(\"mouseover\", focus).on(\"mouseout\", unfocus);\n    node.call(d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended));\n    var labelNode = container.append(\"g\").attr(\"class\", \"labelNodes\").selectAll(\"text\").data(label.nodes).enter().append(\"text\").text(function (d, i) {\n      return i % 2 == 0 ? \"\" : d.node.id;\n    }).style(\"fill\", \"#555\").style(\"font-family\", \"Arial\").style(\"font-size\", 12).style(\"pointer-events\", \"none\"); // to prevent mouseover/drag capture\n\n    node.on(\"mouseover\", focus).on(\"mouseout\", unfocus);\n\n    function ticked() {\n      node.call(updateNode);\n      link.call(updateLink);\n      labelLayout.alphaTarget(0.3).restart();\n      labelNode.each(function (d, i) {\n        if (i % 2 == 0) {\n          d.x = d.node.x;\n          d.y = d.node.y;\n        } else {\n          var b = this.getBBox();\n          var diffX = d.x - d.node.x;\n          var diffY = d.y - d.node.y;\n          var dist = Math.sqrt(diffX * diffX + diffY * diffY);\n          var shiftX = b.width * (diffX - dist) / (dist * 2);\n          shiftX = Math.max(-b.width, Math.min(0, shiftX));\n          var shiftY = 16;\n          this.setAttribute(\"transform\", \"translate(\" + shiftX + \",\" + shiftY + \")\");\n        }\n      });\n      labelNode.call(updateNode);\n    }\n\n    function fixna(x) {\n      if (isFinite(x)) return x;\n      return 0;\n    }\n\n    function focus(d) {\n      var index = d3.select(d3.event.target).datum().index;\n      node.style(\"opacity\", function (o) {\n        return neigh(index, o.index) ? 1 : 0.1;\n      });\n      labelNode.attr(\"display\", function (o) {\n        return neigh(index, o.node.index) ? \"block\" : \"none\";\n      });\n      link.style(\"opacity\", function (o) {\n        return o.source.index == index || o.target.index == index ? 1 : 0.1;\n      });\n    }\n\n    function unfocus() {\n      labelNode.attr(\"display\", \"block\");\n      node.style(\"opacity\", 1);\n      link.style(\"opacity\", 1);\n    }\n\n    function updateLink(link) {\n      link.attr(\"x1\", function (d) {\n        return fixna(d.source.x);\n      }).attr(\"y1\", function (d) {\n        return fixna(d.source.y);\n      }).attr(\"x2\", function (d) {\n        return fixna(d.target.x);\n      }).attr(\"y2\", function (d) {\n        return fixna(d.target.y);\n      });\n    }\n\n    function updateNode(node) {\n      node.attr(\"transform\", function (d) {\n        return \"translate(\" + fixna(d.x) + \",\" + fixna(d.y) + \")\";\n      });\n    }\n\n    function dragstarted(d) {\n      d3.event.sourceEvent.stopPropagation();\n      if (!d3.event.active) graphLayout.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(d) {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    }\n\n    function dragended(d) {\n      if (!d3.event.active) graphLayout.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    }\n  }); // d3.json\n\n  var dataStructure = {\n    \"nodes\": [{\n      \"id\": \"Myriel\",\n      \"group\": 1\n    }, {\n      \"id\": \"Napoleon\",\n      \"group\": 1\n    }, {\n      \"id\": \"Mlle.Baptistine\",\n      \"group\": 1\n    }, {\n      \"id\": \"Mme.Magloire\",\n      \"group\": 1\n    }, {\n      \"id\": \"CountessdeLo\",\n      \"group\": 1\n    }, {\n      \"id\": \"Geborand\",\n      \"group\": 1\n    }, {\n      \"id\": \"Champtercier\",\n      \"group\": 1\n    }, {\n      \"id\": \"Cravatte\",\n      \"group\": 1\n    }, {\n      \"id\": \"Count\",\n      \"group\": 1\n    }, {\n      \"id\": \"OldMan\",\n      \"group\": 1\n    }, {\n      \"id\": \"Labarre\",\n      \"group\": 2\n    }, {\n      \"id\": \"Valjean\",\n      \"group\": 2\n    }, {\n      \"id\": \"Marguerite\",\n      \"group\": 3\n    }, {\n      \"id\": \"Mme.deR\",\n      \"group\": 2\n    }, {\n      \"id\": \"Isabeau\",\n      \"group\": 2\n    }, {\n      \"id\": \"Gervais\",\n      \"group\": 2\n    }, {\n      \"id\": \"Tholomyes\",\n      \"group\": 3\n    }, {\n      \"id\": \"Listolier\",\n      \"group\": 3\n    }, {\n      \"id\": \"Fameuil\",\n      \"group\": 3\n    }, {\n      \"id\": \"Blacheville\",\n      \"group\": 3\n    }, {\n      \"id\": \"Favourite\",\n      \"group\": 3\n    }, {\n      \"id\": \"Dahlia\",\n      \"group\": 3\n    }, {\n      \"id\": \"Zephine\",\n      \"group\": 3\n    }, {\n      \"id\": \"Fantine\",\n      \"group\": 3\n    }]\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"App-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    className: \"App-logo\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }\n  }, \"Edit \", /*#__PURE__*/React.createElement(\"code\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 16\n    }\n  }, \"src/App.js\"), \" and save to reload.\"), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"App-link\",\n    href: \"https://reactjs.org\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }\n  }, \"Learn React\")));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/fazal/Documents/reactjs/inbox-pivot/src/App.js"],"names":["React","d3","App","width","height","color","scaleOrdinal","schemeCategory10","json","dataStructure","then","graph","label","nodes","forEach","d","i","push","node","links","source","target","labelLayout","forceSimulation","force","forceManyBody","strength","forceLink","distance","graphLayout","forceCenter","forceX","forceY","id","on","ticked","adjlist","index","neigh","a","b","svg","select","attr","container","append","call","zoom","scaleExtent","event","transform","link","selectAll","data","enter","group","focus","unfocus","drag","dragstarted","dragged","dragended","labelNode","text","style","updateNode","updateLink","alphaTarget","restart","each","x","y","getBBox","diffX","diffY","dist","Math","sqrt","shiftX","max","min","shiftY","setAttribute","fixna","isFinite","datum","o","sourceEvent","stopPropagation","active","fx","fy","logo"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport * as d3 from 'd3';\n\nfunction App() {\n\n\n  var width = 800;\n  var height = 600;\n  var color = d3.scaleOrdinal(d3.schemeCategory10);\n  \n  d3.json(dataStructure).then(function(graph) {\n  \n  var label = {\n      'nodes': [],\n      'links': []\n  };\n  \n  graph.nodes.forEach(function(d, i) {\n      label.nodes.push({node: d});\n      label.nodes.push({node: d});\n      label.links.push({\n          source: i * 2,\n          target: i * 2 + 1\n      });\n  });\n  \n  var labelLayout = d3.forceSimulation(label.nodes)\n      .force(\"charge\", d3.forceManyBody().strength(-50))\n      .force(\"link\", d3.forceLink(label.links).distance(0).strength(2));\n  \n  var graphLayout = d3.forceSimulation(graph.nodes)\n      .force(\"charge\", d3.forceManyBody().strength(-3000))\n      .force(\"center\", d3.forceCenter(width / 2, height / 2))\n      .force(\"x\", d3.forceX(width / 2).strength(1))\n      .force(\"y\", d3.forceY(height / 2).strength(1))\n      .force(\"link\", d3.forceLink(graph.links).id(function(d) {return d.id; }).distance(50).strength(1))\n      .on(\"tick\", ticked);\n  \n  var adjlist = [];\n  \n  graph.links.forEach(function(d) {\n      adjlist[d.source.index + \"-\" + d.target.index] = true;\n      adjlist[d.target.index + \"-\" + d.source.index] = true;\n  });\n  \n  function neigh(a, b) {\n      return a == b || adjlist[a + \"-\" + b];\n  }\n  \n  \n  var svg = d3.select(\"#viz\").attr(\"width\", width).attr(\"height\", height);\n  var container = svg.append(\"g\");\n  \n  svg.call(\n      d3.zoom()\n          .scaleExtent([.1, 4])\n          .on(\"zoom\", function() { container.attr(\"transform\", d3.event.transform); })\n  );\n  \n  var link = container.append(\"g\").attr(\"class\", \"links\")\n      .selectAll(\"line\")\n      .data(graph.links)\n      .enter()\n      .append(\"line\")\n      .attr(\"stroke\", \"#aaa\")\n      .attr(\"stroke-width\", \"1px\");\n  \n  var node = container.append(\"g\").attr(\"class\", \"nodes\")\n      .selectAll(\"g\")\n      .data(graph.nodes)\n      .enter()\n      .append(\"circle\")\n      .attr(\"r\", 5)\n      .attr(\"fill\", function(d) { return color(d.group); })\n  \n  node.on(\"mouseover\", focus).on(\"mouseout\", unfocus);\n  \n  node.call(\n      d3.drag()\n          .on(\"start\", dragstarted)\n          .on(\"drag\", dragged)\n          .on(\"end\", dragended)\n  );\n  \n  var labelNode = container.append(\"g\").attr(\"class\", \"labelNodes\")\n      .selectAll(\"text\")\n      .data(label.nodes)\n      .enter()\n      .append(\"text\")\n      .text(function(d, i) { return i % 2 == 0 ? \"\" : d.node.id; })\n      .style(\"fill\", \"#555\")\n      .style(\"font-family\", \"Arial\")\n      .style(\"font-size\", 12)\n      .style(\"pointer-events\", \"none\"); // to prevent mouseover/drag capture\n  \n  node.on(\"mouseover\", focus).on(\"mouseout\", unfocus);\n  \n  function ticked() {\n  \n      node.call(updateNode);\n      link.call(updateLink);\n  \n      labelLayout.alphaTarget(0.3).restart();\n      labelNode.each(function(d, i) {\n          if(i % 2 == 0) {\n              d.x = d.node.x;\n              d.y = d.node.y;\n          } else {\n              var b = this.getBBox();\n  \n              var diffX = d.x - d.node.x;\n              var diffY = d.y - d.node.y;\n  \n              var dist = Math.sqrt(diffX * diffX + diffY * diffY);\n  \n              var shiftX = b.width * (diffX - dist) / (dist * 2);\n              shiftX = Math.max(-b.width, Math.min(0, shiftX));\n              var shiftY = 16;\n              this.setAttribute(\"transform\", \"translate(\" + shiftX + \",\" + shiftY + \")\");\n          }\n      });\n      labelNode.call(updateNode);\n  \n  }\n  \n  function fixna(x) {\n      if (isFinite(x)) return x;\n      return 0;\n  }\n  \n  function focus(d) {\n      var index = d3.select(d3.event.target).datum().index;\n      node.style(\"opacity\", function(o) {\n          return neigh(index, o.index) ? 1 : 0.1;\n      });\n      labelNode.attr(\"display\", function(o) {\n        return neigh(index, o.node.index) ? \"block\": \"none\";\n      });\n      link.style(\"opacity\", function(o) {\n          return o.source.index == index || o.target.index == index ? 1 : 0.1;\n      });\n  }\n  \n  function unfocus() {\n     labelNode.attr(\"display\", \"block\");\n     node.style(\"opacity\", 1);\n     link.style(\"opacity\", 1);\n  }\n  \n  function updateLink(link) {\n      link.attr(\"x1\", function(d) { return fixna(d.source.x); })\n          .attr(\"y1\", function(d) { return fixna(d.source.y); })\n          .attr(\"x2\", function(d) { return fixna(d.target.x); })\n          .attr(\"y2\", function(d) { return fixna(d.target.y); });\n  }\n  \n  function updateNode(node) {\n      node.attr(\"transform\", function(d) {\n          return \"translate(\" + fixna(d.x) + \",\" + fixna(d.y) + \")\";\n      });\n  }\n  \n  function dragstarted(d) {\n      d3.event.sourceEvent.stopPropagation();\n      if (!d3.event.active) graphLayout.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n  }\n  \n  function dragged(d) {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n  }\n  \n  function dragended(d) {\n      if (!d3.event.active) graphLayout.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n  }\n  \n  }); // d3.json\n  \n\n\n  var dataStructure = \n  {\n    \"nodes\": [\n      {\n        \"id\": \"Myriel\",\n        \"group\": 1\n      },\n      {\n        \"id\": \"Napoleon\",\n        \"group\": 1\n      },\n      {\n        \"id\": \"Mlle.Baptistine\",\n        \"group\": 1\n      },\n      {\n        \"id\": \"Mme.Magloire\",\n        \"group\": 1\n      },\n      {\n        \"id\": \"CountessdeLo\",\n        \"group\": 1\n      },\n      {\n        \"id\": \"Geborand\",\n        \"group\": 1\n      },\n      {\n        \"id\": \"Champtercier\",\n        \"group\": 1\n      },\n      {\n        \"id\": \"Cravatte\",\n        \"group\": 1\n      },\n      {\n        \"id\": \"Count\",\n        \"group\": 1\n      },\n      {\n        \"id\": \"OldMan\",\n        \"group\": 1\n      },\n      {\n        \"id\": \"Labarre\",\n        \"group\": 2\n      },\n      {\n        \"id\": \"Valjean\",\n        \"group\": 2\n      },\n      {\n        \"id\": \"Marguerite\",\n        \"group\": 3\n      },\n      {\n        \"id\": \"Mme.deR\",\n        \"group\": 2\n      },\n      {\n        \"id\": \"Isabeau\",\n        \"group\": 2\n      },\n      {\n        \"id\": \"Gervais\",\n        \"group\": 2\n      },\n      {\n        \"id\": \"Tholomyes\",\n        \"group\": 3\n      },\n      {\n        \"id\": \"Listolier\",\n        \"group\": 3\n      },\n      {\n        \"id\": \"Fameuil\",\n        \"group\": 3\n      },\n      {\n        \"id\": \"Blacheville\",\n        \"group\": 3\n      },\n      {\n        \"id\": \"Favourite\",\n        \"group\": 3\n      },\n      {\n        \"id\": \"Dahlia\",\n        \"group\": 3\n      },\n      {\n        \"id\": \"Zephine\",\n        \"group\": 3\n      },\n      {\n        \"id\": \"Fantine\",\n        \"group\": 3\n      },\n    ]\n  };  \n\n\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>\n          Edit <code>src/App.js</code> and save to reload.\n        </p>\n        <a\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Learn React\n        </a>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}