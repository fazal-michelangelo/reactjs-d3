{"ast":null,"code":"var _jsxFileName = \"/home/fazal/Documents/claudius/D3-charts/src/LollipopChart4.js\";\nimport React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { lab } from 'd3';\n\nconst moment = require('moment');\n\nconst LollipopChart = props => {\n  useEffect(() => {\n    drawChart();\n  });\n\n  function drawChart() {\n    var margin = {\n      top: 30,\n      right: 30,\n      bottom: 70,\n      left: 60\n    },\n        width = 460 - margin.left - margin.right,\n        height = 400 - margin.top - margin.bottom;\n    var dataVar = 'count';\n    var xLable = 'timestamp';\n    var textVal = 'label';\n    var data = [{\n      \"timestamp\": \"2010-10-20\",\n      \"count\": 62,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"male\",\n      \"peopleCount\": 8,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 4\n    }, {\n      \"timestamp\": \"2011-10-20\",\n      \"count\": 123,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"male\",\n      \"peopleCount\": 8,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 4\n    }, {\n      \"timestamp\": \"2012-10-20\",\n      \"count\": 96,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"male\",\n      \"peopleCount\": 8,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 2\n    }, {\n      \"timestamp\": \"2013-10-20\",\n      \"count\": 336,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"male\",\n      \"peopleCount\": 8,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 3\n    }, {\n      \"timestamp\": \"2014-10-20\",\n      \"count\": 169,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }, {\n      \"timestamp\": \"2015-10-20\",\n      \"count\": 288,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }, {\n      \"timestamp\": \"2016-10-20\",\n      \"count\": 169,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }, {\n      \"timestamp\": \"2017-10-20\",\n      \"count\": 99,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }, {\n      \"timestamp\": \"2018-10-20\",\n      \"count\": 15,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }, {\n      \"timestamp\": \"2019-10-20\",\n      \"count\": 210,\n      \"event\": [{\n        'evetType': 'this is the first event'\n      }, {\n        'evetType': 'second event is printed here'\n      }],\n      \"gender\": \"female\",\n      \"peopleCount\": 2,\n      \"label\": \"General count for datastructure\",\n      \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n      \"severity\": 1\n    }];\n    const svg = d3.select(d3Container.current).append(\"svg\").attr('id', 'Chart').attr(\"width\", '100%').attr(\"height\", 500).attr('transform', 'translate(0, 100)');\n    var clip = svg.append(\"defs\").append(\"svg:clipPath\").attr(\"id\", \"clip\").append(\"svg:rect\").attr(\"width\", width).attr(\"height\", height).attr(\"x\", 0).attr(\"y\", 0); // Add brushing\n\n    var brush = d3.brushX() // Add the brush feature using the d3.brush function\n    .extent([[0, 0], [width, height]]) // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area\n    .on(\"end\", updateChart); // Each time the brush selection changes, trigger the 'updateChart'\n\n    var idleTimeout;\n\n    function idled() {\n      idleTimeout = null;\n    }\n\n    var x = d3.scaleLinear().domain(data.map(function (d) {\n      return d[xLable];\n    })).range([0, width]).padding(1);\n    var xAxis = d3.axisBottom(x).tickValues(x.domain().filter(function (d, i) {\n      return !(i % 5);\n    }));\n    svg.append(\"g\").attr('id', 'xAxisID').attr(\"transform\", \"translate(\" + margin.left + \",\" + height + \")\").call(xAxis).selectAll(\"text\").style(\"text-anchor\", \"start\").attr('x', 20);\n    d3.selectAll(\"g.tick line\").attr('y2', 20);\n    var y = d3.scaleLinear().range([height, 0]);\n    var yAxis = svg.append(\"g\").attr('transform', 'translate(' + margin.left + ' , 0)');\n    y.domain([0, d3.max(data, function (d) {\n      return +d[dataVar] * 1.2;\n    })]);\n    yAxis.transition().duration(1000).call(d3.axisLeft(y)); // .style('display', 'none');\n\n    var j = svg.selectAll(\".myLine\").data(data);\n    j.enter().append(\"line\").attr(\"class\", \"myLine\").merge(j).transition().attr('transform', 'translate(' + margin.left + ', 0)').duration(1000).attr(\"x1\", function (d) {\n      return x(d[xLable]);\n    }).attr(\"x2\", function (d) {\n      return x(d[xLable]);\n    }).attr(\"y1\", y(0)).attr(\"y2\", function (d) {\n      return y(d[dataVar]);\n    }).attr(\"stroke\", \"grey\");\n    let bubbleGroup = svg.append('g').attr('id', 'bubble-group');\n    bubbleGroup.transition().attr('transform', 'translate(' + margin.left + ', 0)'); // data(data);\n\n    let group = bubbleGroup.selectAll('g').data(data).enter().append('g');\n    group.append('text').text(function (d) {\n      return d[textVal];\n    }).attr(\"x\", function (d) {\n      return x(d[xLable]) + 10;\n    }).attr(\"y\", function (d) {\n      return y(d[dataVar]);\n    }).style('font-size', '10px');\n    group.append('circle').attr(\"cx\", function (d) {\n      return x(d[xLable]);\n    }).attr(\"cy\", function (d) {\n      return y(d[dataVar]);\n    }).attr(\"r\", 7).on('mouseover', function (d) {\n      console.log('School of Athens'); // d3.select(this.parentNode).append('text')                \n      //     .attr(\"x\", function (d) { return x(d.group) })\n      //     .attr(\"y\", function (d) { return y(d['var1']); })\n      //     .text(function(d) { return d[textVal] });\n    });\n\n    function updateChart() {\n      var extent = d3.event.selection; // If no selection, back to initial coordinate. Otherwise, update X axis domain\n\n      if (!extent) {\n        if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit\n\n        x.domain([4, 8]);\n      } else {\n        x.domain([x.invert(extent[0]), x.invert(extent[1])]);\n        group.select(\".brush\").call(brush.move, null); // This remove the grey brush area as soon as the selection has been done\n      } // Update axis and circle position\n\n\n      xAxis.transition().duration(1000).call(d3.axisBottom(x));\n      group.selectAll(\"circle\").transition().duration(1000).attr(\"cx\", function (d) {\n        return x(d.Sepal_Length);\n      }).attr(\"cy\", function (d) {\n        return y(d.Petal_Length);\n      });\n    }\n\n    group.append('g').attr('class', 'brush').call(brush);\n  }\n\n  const d3Container = useRef(null);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d3-lollipop-chart\",\n    width: 996,\n    height: 444,\n    ref: d3Container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default LollipopChart;","map":{"version":3,"sources":["/home/fazal/Documents/claudius/D3-charts/src/LollipopChart4.js"],"names":["React","useRef","useEffect","d3","lab","moment","require","LollipopChart","props","drawChart","margin","top","right","bottom","left","width","height","dataVar","xLable","textVal","data","svg","select","d3Container","current","append","attr","clip","brush","brushX","extent","on","updateChart","idleTimeout","idled","x","scaleLinear","domain","map","d","range","padding","xAxis","axisBottom","tickValues","filter","i","call","selectAll","style","y","yAxis","max","transition","duration","axisLeft","j","enter","merge","bubbleGroup","group","text","console","log","event","selection","setTimeout","invert","move","Sepal_Length","Petal_Length"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { lab } from 'd3';\nconst moment = require('moment');\n\n\nconst LollipopChart = (props) => {\n    useEffect(() => {\n        drawChart();\n    });\n\n    function drawChart() {\n\n        var margin = { top: 30, right: 30, bottom: 70, left: 60 },\n            width = 460 - margin.left - margin.right,\n            height = 400 - margin.top - margin.bottom;\n\n\n        var dataVar = 'count';\n        var xLable = 'timestamp';\n        var textVal = 'label';\n\n            \n        var data = [\n            {\n                \"timestamp\": \"2010-10-20\",\n                \"count\": 62,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"male\",\n                \"peopleCount\": 8,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 4\n            },\n            {\n                \"timestamp\": \"2011-10-20\",\n                \"count\": 123,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"male\",\n                \"peopleCount\": 8,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 4\n            },\n            {\n                \"timestamp\": \"2012-10-20\",\n                \"count\": 96,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"male\",\n                \"peopleCount\": 8,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 2\n            },\n            {\n                \"timestamp\": \"2013-10-20\",\n                \"count\": 336,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"male\",\n                \"peopleCount\": 8,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 3\n            },\n            {\n                \"timestamp\": \"2014-10-20\",\n                \"count\": 169,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n            {\n                \"timestamp\": \"2015-10-20\",\n                \"count\": 288,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n            {\n                \"timestamp\": \"2016-10-20\",\n                \"count\": 169,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n            {\n                \"timestamp\": \"2017-10-20\",\n                \"count\": 99,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n            {\n                \"timestamp\": \"2018-10-20\",\n                \"count\": 15,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n            {\n                \"timestamp\": \"2019-10-20\",\n                \"count\": 210,\n                \"event\": [{'evetType': 'this is the first event'},{'evetType': 'second event is printed here'}],\n                \"gender\": \"female\",\n                \"peopleCount\": 2,\n                \"label\": \"General count for datastructure\",\n                \"description\": \"Raphael painted school of Athens for POP THE JULIUS SECOND and he was contemprory of michelangelo\",\n                \"severity\": 1\n            },\n        ];\n\n        const svg = d3.select(d3Container.current).append(\"svg\").attr('id', 'Chart').attr(\"width\", '100%').attr(\"height\", 500).attr('transform', 'translate(0, 100)');\n\n\n\n        var clip = svg.append(\"defs\").append(\"svg:clipPath\")\n      .attr(\"id\", \"clip\")\n      .append(\"svg:rect\")\n      .attr(\"width\", width )\n      .attr(\"height\", height )\n      .attr(\"x\", 0)\n      .attr(\"y\", 0);\n\n\n        // Add brushing\n  var brush = d3.brushX()                 // Add the brush feature using the d3.brush function\n  .extent( [ [0,0], [width,height] ] ) // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area\n  .on(\"end\", updateChart) // Each time the brush selection changes, trigger the 'updateChart'\n\n\n  var idleTimeout\n  function idled() { idleTimeout = null; }\n\n\n\n\n\n\n        var x = d3.scaleLinear()\n        .domain(data.map(function (d) { return d[xLable]; }))\n            .range([0, width])\n            .padding(1);\n\n            var xAxis = d3.axisBottom(x)\n            .tickValues(x.domain().filter(function(d,i){ return !(i%5)}));\n\n\n        svg.append(\"g\")\n            .attr('id', 'xAxisID')\n            .attr(\"transform\", \"translate(\"+margin.left+\",\" + (height) + \")\")\n            .call(xAxis)\n            .selectAll(\"text\")\n            .style(\"text-anchor\", \"start\")\n            .attr('x', 20)\n\n            d3.selectAll(\"g.tick line\")\n            .attr('y2', 20)\n\n        var y = d3.scaleLinear()\n            .range([height, 0]);\n        var yAxis = svg.append(\"g\")\n        .attr('transform', 'translate(' + margin.left + ' , 0)')\n\n        y.domain([0, d3.max(data, function (d) { return +d[dataVar]*1.2 })]);\n        yAxis.transition().duration(1000)\n        .call(d3.axisLeft(y))\n        // .style('display', 'none');\n\n\n\n\n    var j = svg.selectAll(\".myLine\")\n    .data(data)\n  j\n    .enter()\n    .append(\"line\")\n    .attr(\"class\", \"myLine\")\n    .merge(j)\n    .transition()\n    .attr('transform', 'translate('+margin.left+', 0)')\n    .duration(1000)\n      .attr(\"x1\", function(d) { return x(d[xLable]); })\n      .attr(\"x2\", function(d) { return x(d[xLable]); })\n      .attr(\"y1\", y(0))\n      .attr(\"y2\", function(d) { return y(d[dataVar]); })\n      .attr(\"stroke\", \"grey\")\n\n\n\n\n        let bubbleGroup = svg.append('g').attr('id', 'bubble-group')\n\n\n        bubbleGroup.transition()\n        .attr('transform', 'translate('+ margin.left +', 0)')\n        \n        // data(data);\n\n        let group = bubbleGroup.selectAll('g')\n        .data(data)\n        .enter()\n        .append('g')\n\n\n        group.append('text')\n        .text(function(d) {return d[textVal]})\n        .attr(\"x\", function (d) { return x(d[xLable])+10 })\n        .attr(\"y\", function (d) { return y(d[dataVar]); })\n        .style('font-size', '10px')\n\n\n        group.append('circle')        \n        .attr(\"cx\", function (d) { return x(d[xLable]) })\n        .attr(\"cy\", function (d) { return y(d[dataVar]); })\n        .attr(\"r\", 7)\n\n        .on('mouseover', function(d) {\n\n            console.log('School of Athens')\n            // d3.select(this.parentNode).append('text')                \n            //     .attr(\"x\", function (d) { return x(d.group) })\n            //     .attr(\"y\", function (d) { return y(d['var1']); })\n            //     .text(function(d) { return d[textVal] });\n        })\n\n\n\n\n\n  function updateChart() {\n\n    var extent = d3.event.selection\n\n    // If no selection, back to initial coordinate. Otherwise, update X axis domain\n    if(!extent){\n      if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit\n      x.domain([ 4,8])\n    }else{\n      x.domain([ x.invert(extent[0]), x.invert(extent[1]) ])\n      group.select(\".brush\").call(brush.move, null) // This remove the grey brush area as soon as the selection has been done\n    }\n\n    // Update axis and circle position\n    xAxis.transition().duration(1000).call(d3.axisBottom(x))\n    group\n      .selectAll(\"circle\")\n      .transition().duration(1000)\n      .attr(\"cx\", function (d) { return x(d.Sepal_Length); } )\n      .attr(\"cy\", function (d) { return y(d.Petal_Length); } )\n\n    }\n\n\n    group\n    .append('g')\n    .attr('class', 'brush')\n    .call(brush)\n\n\n\n\n\n    }\n\n    const d3Container = useRef(null);\n\n    return (\n        <div\n            className=\"d3-lollipop-chart\"\n            width={996}\n            height={444}\n            ref={d3Container}\n        ></div>\n    );\n}\n\nexport default LollipopChart;"]},"metadata":{},"sourceType":"module"}