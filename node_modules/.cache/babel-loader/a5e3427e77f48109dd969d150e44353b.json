{"ast":null,"code":"import React,{useRef,useEffect}from'react';import*as d3 from'd3';var moment=require('moment');var TimelineBubble=function TimelineBubble(props){useEffect(function(){drawChart();});function drawChart(){var data=[{\"id\":0,\"name\":\"Bachelor degree in Japanese and English languages\",\"category\":\"Education\",\"placeName\":\"Université de Grenoble (Stendhal)\",\"country\":\"France\",\"startDate\":\"2010-09\",\"endDate\":\"2013-07\",\"description\":[\"Japanese (Kanji, Grammar, History, Language practise)\",\"English (British and American history, Grammar, Language practise)\",\"Economy, Accounting, Law, International law\",\"Introduction to computer Science (Javascript, Adobe Flash Player, Microsoft Access, CMS)\"],\"skills\":[\"english\",\"japanese\",\"law\",\"economics\"]},{\"id\":1,\"name\":\"Exchange Student\",\"category\":\"Education\",\"placeName\":\"Nagoya University of Foreign Studies\",\"country\":\"Japan\",\"startDate\":\"2012-09\",\"endDate\":\"2013-07\",\"description\":[\"Japanese language classes JLPT N3, JLPT N2\",\"Tourism & Hospitality\",\"Economy\",\"British law\",\"Sociology\"],\"skills\":[\"english\",\"japanese\",\"law\",\"economics\",\"sociology\",\"tourism industry\"]},{\"id\":2,\"name\":\"Master degree in Computer Science\",\"category\":\"Education\",\"placeName\":\"Université de Grenoble\",\"country\":\"France\",\"startDate\":\"2016-09\",\"endDate\":\"2018-07\",\"description\":[\"Algorithms\",\"Java\",\"Web Dev\",\"Systems & Networks\",\"DB (SQL)\",\"HCI\",\"AI\"],\"skills\":[\"java\",\"algorithms\",\"javascript\",\"php\",\".NET\",\"SQL\"]},{\"id\":3,\"name\":\"Project Manager and Front-End Engineer\",\"category\":\"Work\",\"placeName\":\"Studio Umi\",\"country\":\"Japan\",\"startDate\":\"2015-02\",\"endDate\":\"2016-07\",\"description\":[\"Web project planning\",\"Budget prevision\",\"Team and deadlines management\",\"HTML\",\"CSS\",\"SCSS\",\"Sass\",\"Gulp\",\"jQuery\",\"GitLab\",\"Drupal(7)\",\"Events & Talks : CMS Summer Festival Osaka, Start Up Week End Nagahama Shiga, Drupal Cafe, Code for Shiga\"],\"skills\":[\"html\",\"css\",\"scss\",\"javascript\",\"jQuery\",\"php\",\"Drupal\"]},{\"id\":4,\"name\":\"Data Vizualisation Internship\",\"category\":\"Work\",\"placeName\":\"Atos Bull\",\"country\":\"France\",\"startDate\":\"2018-01\",\"endDate\":\"2018-07\",\"description\":\"Design and development of graphical solutions for HPC data analysis (D3.js)\",\"skills\":[\"html\",\"css\",\"sass\",\"javascript\",\"d3.js\",\"Symfony\"]},{\"id\":5,\"name\":\"Software Engineer at Schneider Electric\",\"category\":\"Work\",\"placeName\":\"Thales Services\",\"country\":\"France\",\"startDate\":\"2018-09\",\"endDate\":\"2019-01\",\"description\":\"Development of an application for electrical pannels (Spring, Angular, MongoDB)\",\"skills\":[\"java\",\"angular\",\"mongoDB\",\"mongoshell\"]},{\"id\":6,\"name\":\"Research for version upgrade at Richemont\",\"category\":\"Work\",\"placeName\":\"Thales Services\",\"country\":\"France\",\"startDate\":\"2019-01\",\"endDate\":\"2019-02\",\"description\":\"Study to evaluate the impact of an application upgrade (SQL)\",\"skills\":[\"SQL\"]},{\"id\":7,\"name\":\"Introduction to Data Science in Python\",\"category\":\"Education\",\"placeName\":\"Coursera\",\"country\":\"France\",\"startDate\":\"2018-10\",\"endDate\":\"2018-11-29\",\"description\":\"Courses : What is Data Science, Open tools for Data Science, Data Science Methodology, Databases and SQL for Data Science\",\"skills\":[\"Python\",\"Jupyter Notebooks\",\"SQL\"]},{\"id\":8,\"name\":\"IBM Data Science Courses\",\"category\":\"Education\",\"placeName\":\"Coursera\",\"country\":\"France\",\"startDate\":\"2018-11-20\",\"endDate\":\"2019-01-25\",\"description\":\"Python for Data Science, Data Analysis with Python, Data Visualization with Python\",\"skills\":[\"Python\",\"Jupyter Notebooks\",\"Matplotlib\",\"Numpy\",\"Seaborn\"]},{\"id\":9,\"name\":\"Managing Data Analysis\",\"category\":\"Education\",\"placeName\":\"Coursera\",\"country\":\"France\",\"startDate\":\"2018-12-23\",\"endDate\":\"2019-01-08\",\"description\":\"Course about the process of managing data analysis and EDA\",\"skills\":[\"Data Analysis\"]},{\"id\":10,\"name\":\"Interactivity with JavaScript\",\"category\":\"Education\",\"placeName\":\"Coursera\",\"country\":\"France\",\"startDate\":\"2016-01-24\",\"endDate\":\"2016-02-17\",\"description\":\"Basics of Javascript language\",\"skills\":[\"Javascript\"]}];var svg=d3.select(d3Container.current).append(\"svg\").attr('id','Chart').attr(\"width\",'100%').attr(\"height\",500);svg.append('line').attr('class','timeline-base').attr(\"x1\",0).attr(\"y1\",100).attr(\"x2\",'90%').attr(\"y2\",100);// Get the value of the svg to for scaleLinear\nfunction getLineVal(val){if(val==='max'){var el=document.getElementById('Chart');return el.getBoundingClientRect().width;}else{return 0;}}// Convert to UNIX timestamp\nfunction convertToTimeStamp(date){var parts=date.match(/(\\d{4})-(\\d{2})/);return new Date(parts[1]+'-'+parts[2]+'-01').getTime();}var scaleLine=d3.scaleLinear().domain([1285891200000,Date.now()]).range([getLineVal('min')+20,getLineVal('max')-100]);// OFFSET = 20\nvar scaleCircle=d3.scaleLinear().domain([moment.duration(3,'d').asMilliseconds(),moment.duration(10,'y').asMilliseconds()]).range([10,200]);var allGroups=svg.selectAll('g').data(data);var group=allGroups.enter().append('g').attr('id',function(data){return'group-'+data.id;});group.append('circle').attr('cx',function(data){return scaleLine(convertToTimeStamp(data.startDate));}).attr('cy',100).attr('r',function(data){return scaleCircle(convertToTimeStamp(data.endDate)-convertToTimeStamp(data.startDate));}).attr('fill-opacity',0.5).attr('class',function(data){return'circle-category circle-'+data.category.toLowerCase();}).attr('id',function(data){return'circle-'+data.id;})// When hover a circle\n.on('mouseover',function(d,i){d3.select(this).attr('r',function(data){return scaleCircle(convertToTimeStamp(data.endDate)-convertToTimeStamp(data.startDate))+20;});d3.select(this).classed('circle-hovered',true);d3.select(this.parentNode).selectAll('text').style('opacity',1);d3.select(this.parentNode).selectAll('.text-place').classed('hovered',true).style('opacity',0);d3.select(this.parentNode).selectAll('.text-desc').classed('hovered',true).style('opacity',0);d3.select(this.parentNode).selectAll('.text-date-end').classed('hovered',true).style('opacity',0);})// When click a circle\n// onclick functionality has been muted as per required data-layout\n// .on('click', function (d, i) {\n//     d3.select(this).attr('r', 2000);\n//     d3.selectAll('line').style('opacity', 0);\n//     d3.selectAll('circle').filter(function () {\n//         return !this.classList.contains('circle-hovered');\n//     }).style('opacity', 0);\n//     d3.select(this).classed('circle-clicked', true);\n//     d3.select(this.parentNode).selectAll('.text-position').style('opacity', 0);\n//     d3.select(this.parentNode).selectAll('.text-date').style('opacity', 0);\n//     d3.selectAll('.details').style('display', 'none');\n//     setTimeout(function () {\n//         svg.attr('height', 0);\n//     }, 450)\n//     let currId = this.getAttribute('id').split('-')[1];\n//     let details = d3.select('#details-' + currId);\n//     details.style('display', 'block');\n//     details.style('opacity', 1);\n// })\n// When un-hover a circle\n.on('mouseout',function(d,i){d3.select(this).attr('r',function(data){return scaleCircle(convertToTimeStamp(data.endDate)-convertToTimeStamp(data.startDate));});d3.select(this).classed('circle-hovered',false);d3.select(this.parentNode).selectAll('text').style('opacity',0);});group.append('text').style('opacity',0).text(function(data){return data.name;}).attr('x',function(data){var elementWitdh=this.getBoundingClientRect().width;// Avoid overflow\nif(scaleLine(convertToTimeStamp(data.startDate))+elementWitdh>=getLineVal('max')){return scaleLine(convertToTimeStamp(data.startDate))-elementWitdh;}else{return scaleLine(convertToTimeStamp(data.startDate));}}).attr('y',150).attr('class','text-position');// group.append('text')\n//     .text(function (data) {\n//         // Get only YYYY-MM\n//         if (data.startDate.length > 7) {\n//             return (data.startDate.slice(0, 7))\n//         }\n//         else {\n//             return (data.startDate)\n//         }\n//     })\n//     .attr('x', function (data) {\n//         // Get sibling to have the len and align the date\n//         let elementWitdh = this.getBoundingClientRect().width;\n//         let positionWidth = this.parentNode.querySelector('text.text-position').getBoundingClientRect().width;\n//         if (scaleLine(convertToTimeStamp(data.startDate)) + positionWidth >= getLineVal('max')) {\n//             return scaleLine(convertToTimeStamp(data.startDate)) - elementWitdh;\n//         }\n//         else {\n//             return scaleLine(convertToTimeStamp(data.startDate));\n//         }\n//     })\n//     .attr('y', 130)\n//     .attr('class', 'text-date')\n//     .style('opacity', 0);\n// data.map(d => {\n//     let details = d3.select('#timelineChart').append('div').classed('details', true).classed('details-' + d.category.toLowerCase(), true).attr('id', 'details-' + d.id);\n//     details.append('i').classed('material-icons close-icon', true).text('close');\n//     details.append('div').classed('title', true).append('span').classed('date text-date date-title', true).text(d.startDate + '-' + d.endDate);\n//     details.select(' .title').append('span').classed('position-title text-position', true).text(d.name);\n//     details.append('div').classed('place-name text-place hovered', true).text(d.placeName);\n//     details.append('div')\n//         .attr('class', 'text-desc')\n//         .attr('id', 'descriptionId-' + d.id)\n//         .text(function () {\n//             if (typeof (d.description) === 'string') {\n//                 return d.description;\n//             }\n//             else {\n//                 return d.description.toString()\n//             }\n//         });\n//     details.style('opacity', 0);\n// });\n// Hide the details div (once opened by clicking on circle)\n// close-icon onclick functionality has been muted as per required data-layout\n// d3.selectAll('.close-icon').on('click', function () {\n//     d3.select(this.parentNode).style('opacity', 0);\n//     setTimeout(function () {\n//         svg.attr('height', 500);\n//         d3.select('.timeline-base').style('opacity', 1)\n//         d3.selectAll('circle').classed('circle-clicked', false);\n//         d3.selectAll('circle').style('opacity', 1);\n//         d3.selectAll('.details').style('display', 'block');\n//     }, 1000)\n// })\n}var d3Container=useRef(null);return/*#__PURE__*/React.createElement(\"svg\",{className:\"d3-timeline-bubble\",width:996,height:444,ref:d3Container});};export default TimelineBubble;","map":{"version":3,"sources":["/home/fazal/Documents/claudius/D3-charts/src/timelineBubble.js"],"names":["React","useRef","useEffect","d3","moment","require","TimelineBubble","props","drawChart","data","svg","select","d3Container","current","append","attr","getLineVal","val","el","document","getElementById","getBoundingClientRect","width","convertToTimeStamp","date","parts","match","Date","getTime","scaleLine","scaleLinear","domain","now","range","scaleCircle","duration","asMilliseconds","allGroups","selectAll","group","enter","id","startDate","endDate","category","toLowerCase","on","d","i","classed","parentNode","style","text","name","elementWitdh"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nconst moment = require('moment');\n\n\nconst TimelineBubble = (props) => {\n    useEffect(() => {\n        drawChart();\n    });\n    \n    function drawChart() {\n        var data = [\n            {\n                \"id\": 0,\n                \"name\": \"Bachelor degree in Japanese and English languages\",\n                \"category\": \"Education\",\n                \"placeName\": \"Université de Grenoble (Stendhal)\",\n                \"country\": \"France\",\n                \"startDate\": \"2010-09\",\n                \"endDate\": \"2013-07\",\n                \"description\": [\"Japanese (Kanji, Grammar, History, Language practise)\",\n                    \"English (British and American history, Grammar, Language practise)\",\n                    \"Economy, Accounting, Law, International law\",\n                    \"Introduction to computer Science (Javascript, Adobe Flash Player, Microsoft Access, CMS)\"],\n                \"skills\": [\n                    \"english\",\n                    \"japanese\",\n                    \"law\",\n                    \"economics\"\n                ]\n            },\n            {\n                \"id\": 1,\n                \"name\": \"Exchange Student\",\n                \"category\": \"Education\",\n                \"placeName\": \"Nagoya University of Foreign Studies\",\n                \"country\": \"Japan\",\n                \"startDate\": \"2012-09\",\n                \"endDate\": \"2013-07\",\n                \"description\": [\"Japanese language classes JLPT N3, JLPT N2\",\n                    \"Tourism & Hospitality\",\n                    \"Economy\",\n                    \"British law\",\n                    \"Sociology\"],\n                \"skills\": [\n                    \"english\",\n                    \"japanese\",\n                    \"law\",\n                    \"economics\",\n                    \"sociology\",\n                    \"tourism industry\"\n                ]\n            },\n            {\n                \"id\": 2,\n                \"name\": \"Master degree in Computer Science\",\n                \"category\": \"Education\",\n                \"placeName\": \"Université de Grenoble\",\n                \"country\": \"France\",\n                \"startDate\": \"2016-09\",\n                \"endDate\": \"2018-07\",\n                \"description\": [\"Algorithms\",\n                    \"Java\",\n                    \"Web Dev\",\n                    \"Systems & Networks\",\n                    \"DB (SQL)\",\n                    \"HCI\",\n                    \"AI\"],\n                \"skills\": [\n                    \"java\",\n                    \"algorithms\",\n                    \"javascript\",\n                    \"php\",\n                    \".NET\",\n                    \"SQL\"\n                ]\n            },\n            {\n                \"id\": 3,\n                \"name\": \"Project Manager and Front-End Engineer\",\n                \"category\": \"Work\",\n                \"placeName\": \"Studio Umi\",\n                \"country\": \"Japan\",\n                \"startDate\": \"2015-02\",\n                \"endDate\": \"2016-07\",\n                \"description\": [\"Web project planning\",\n                    \"Budget prevision\",\n                    \"Team and deadlines management\",\n                    \"HTML\",\n                    \"CSS\",\n                    \"SCSS\",\n                    \"Sass\",\n                    \"Gulp\",\n                    \"jQuery\",\n                    \"GitLab\",\n                    \"Drupal(7)\",\n                    \"Events & Talks : CMS Summer Festival Osaka, Start Up Week End Nagahama Shiga, Drupal Cafe, Code for Shiga\"],\n                \"skills\": [\n                    \"html\",\n                    \"css\",\n                    \"scss\",\n                    \"javascript\",\n                    \"jQuery\",\n                    \"php\",\n                    \"Drupal\"\n                ]\n            },\n            {\n                \"id\": 4,\n                \"name\": \"Data Vizualisation Internship\",\n                \"category\": \"Work\",\n                \"placeName\": \"Atos Bull\",\n                \"country\": \"France\",\n                \"startDate\": \"2018-01\",\n                \"endDate\": \"2018-07\",\n                \"description\": \"Design and development of graphical solutions for HPC data analysis (D3.js)\",\n                \"skills\": [\n                    \"html\",\n                    \"css\",\n                    \"sass\",\n                    \"javascript\",\n                    \"d3.js\",\n                    \"Symfony\"\n                ]\n            },\n            {\n                \"id\": 5,\n                \"name\": \"Software Engineer at Schneider Electric\",\n                \"category\": \"Work\",\n                \"placeName\": \"Thales Services\",\n                \"country\": \"France\",\n                \"startDate\": \"2018-09\",\n                \"endDate\": \"2019-01\",\n                \"description\": \"Development of an application for electrical pannels (Spring, Angular, MongoDB)\",\n                \"skills\": [\n                    \"java\",\n                    \"angular\",\n                    \"mongoDB\",\n                    \"mongoshell\"\n                ]\n            },\n            {\n                \"id\": 6,\n                \"name\": \"Research for version upgrade at Richemont\",\n                \"category\": \"Work\",\n                \"placeName\": \"Thales Services\",\n                \"country\": \"France\",\n                \"startDate\": \"2019-01\",\n                \"endDate\": \"2019-02\",\n                \"description\": \"Study to evaluate the impact of an application upgrade (SQL)\",\n                \"skills\": [\n                    \"SQL\"\n                ]\n            },\n            {\n                \"id\": 7,\n                \"name\": \"Introduction to Data Science in Python\",\n                \"category\": \"Education\",\n                \"placeName\": \"Coursera\",\n                \"country\": \"France\",\n                \"startDate\": \"2018-10\",\n                \"endDate\": \"2018-11-29\",\n                \"description\": \"Courses : What is Data Science, Open tools for Data Science, Data Science Methodology, Databases and SQL for Data Science\",\n                \"skills\": [\n                    \"Python\",\n                    \"Jupyter Notebooks\",\n                    \"SQL\"\n                ]\n            },\n            {\n                \"id\": 8,\n                \"name\": \"IBM Data Science Courses\",\n                \"category\": \"Education\",\n                \"placeName\": \"Coursera\",\n                \"country\": \"France\",\n                \"startDate\": \"2018-11-20\",\n                \"endDate\": \"2019-01-25\",\n                \"description\": \"Python for Data Science, Data Analysis with Python, Data Visualization with Python\",\n                \"skills\": [\n                    \"Python\",\n                    \"Jupyter Notebooks\",\n                    \"Matplotlib\",\n                    \"Numpy\",\n                    \"Seaborn\"\n                ]\n            },\n            {\n                \"id\": 9,\n                \"name\": \"Managing Data Analysis\",\n                \"category\": \"Education\",\n                \"placeName\": \"Coursera\",\n                \"country\": \"France\",\n                \"startDate\": \"2018-12-23\",\n                \"endDate\": \"2019-01-08\",\n                \"description\": \"Course about the process of managing data analysis and EDA\",\n                \"skills\": [\n                    \"Data Analysis\"\n                ]\n            },\n            {\n                \"id\": 10,\n                \"name\": \"Interactivity with JavaScript\",\n                \"category\": \"Education\",\n                \"placeName\": \"Coursera\",\n                \"country\": \"France\",\n                \"startDate\": \"2016-01-24\",\n                \"endDate\": \"2016-02-17\",\n                \"description\": \"Basics of Javascript language\",\n                \"skills\": [\n                    \"Javascript\"\n                ]\n            }\n        ];\n\n        const svg = d3.select(d3Container.current).append(\"svg\").attr('id', 'Chart').attr(\"width\", '100%').attr(\"height\", 500);\n        svg.append('line').attr('class', 'timeline-base')\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 100)\n            .attr(\"x2\", '90%')\n            .attr(\"y2\", 100);\n        // Get the value of the svg to for scaleLinear\n        function getLineVal(val) {\n            if (val === 'max') {\n                let el = document.getElementById('Chart');\n                return el.getBoundingClientRect().width;\n            }\n            else {\n                return 0;\n            }\n        }\n        // Convert to UNIX timestamp\n        function convertToTimeStamp(date) {\n            let parts = date.match(/(\\d{4})-(\\d{2})/);\n            return new Date(parts[1] + '-' + parts[2] + '-01').getTime();\n        }\n\n        let scaleLine = d3.scaleLinear()\n            .domain([1285891200000, Date.now()])\n            .range([getLineVal('min') + 20, getLineVal('max') - 100]); // OFFSET = 20\n\n        let scaleCircle = d3.scaleLinear()\n            .domain([moment.duration(3, 'd').asMilliseconds(), moment.duration(10, 'y').asMilliseconds()])\n            .range([10, 200]);\n\n        let allGroups = svg.selectAll('g').data(data);\n        let group = allGroups.enter().append('g').attr('id', function (data) { return 'group-' + data.id });\n\n        group.append('circle')\n            .attr('cx', function (data) { return scaleLine(convertToTimeStamp(data.startDate)); })\n            .attr('cy', 100)\n            .attr('r', function (data) { return scaleCircle(convertToTimeStamp(data.endDate) - convertToTimeStamp(data.startDate)); })\n            .attr('fill-opacity', 0.5)\n            .attr('class', function (data) { return ('circle-category circle-' + data.category.toLowerCase()) })\n            .attr('id', function (data) {\n                return 'circle-' + data.id\n            })\n            // When hover a circle\n            .on('mouseover', function (d, i) {\n                d3.select(this).attr('r', function (data) { return scaleCircle(convertToTimeStamp(data.endDate) - convertToTimeStamp(data.startDate)) + 20; });\n                d3.select(this).classed('circle-hovered', true);\n                d3.select(this.parentNode).selectAll('text').style('opacity', 1);\n                d3.select(this.parentNode).selectAll('.text-place').classed('hovered', true).style('opacity', 0);\n                d3.select(this.parentNode).selectAll('.text-desc').classed('hovered', true).style('opacity', 0);\n                d3.select(this.parentNode).selectAll('.text-date-end').classed('hovered', true).style('opacity', 0);\n            })\n            // When click a circle\n\n            // onclick functionality has been muted as per required data-layout\n            // .on('click', function (d, i) {\n            //     d3.select(this).attr('r', 2000);\n            //     d3.selectAll('line').style('opacity', 0);\n            //     d3.selectAll('circle').filter(function () {\n            //         return !this.classList.contains('circle-hovered');\n            //     }).style('opacity', 0);\n            //     d3.select(this).classed('circle-clicked', true);\n            //     d3.select(this.parentNode).selectAll('.text-position').style('opacity', 0);\n            //     d3.select(this.parentNode).selectAll('.text-date').style('opacity', 0);\n            //     d3.selectAll('.details').style('display', 'none');\n            //     setTimeout(function () {\n            //         svg.attr('height', 0);\n            //     }, 450)\n            //     let currId = this.getAttribute('id').split('-')[1];\n            //     let details = d3.select('#details-' + currId);\n            //     details.style('display', 'block');\n            //     details.style('opacity', 1);\n            // })\n            // When un-hover a circle\n            .on('mouseout', function (d, i) {\n                d3.select(this).attr('r', function (data) { return scaleCircle(convertToTimeStamp(data.endDate) - convertToTimeStamp(data.startDate)); });\n                d3.select(this).classed('circle-hovered', false);\n                d3.select(this.parentNode).selectAll('text').style('opacity', 0);\n            });\n\n        group.append('text')\n            .style('opacity', 0)\n            .text(function (data) { return (data.name); })\n            .attr('x', function (data) {\n                let elementWitdh = this.getBoundingClientRect().width;\n                // Avoid overflow\n                if (scaleLine(convertToTimeStamp(data.startDate)) + elementWitdh >= getLineVal('max')) {\n                    return scaleLine(convertToTimeStamp(data.startDate)) - elementWitdh;\n                }\n                else {\n                    return scaleLine(convertToTimeStamp(data.startDate));\n                }\n            })\n            .attr('y', 150)\n            .attr('class', 'text-position');\n\n        // group.append('text')\n        //     .text(function (data) {\n        //         // Get only YYYY-MM\n        //         if (data.startDate.length > 7) {\n        //             return (data.startDate.slice(0, 7))\n        //         }\n        //         else {\n        //             return (data.startDate)\n        //         }\n        //     })\n        //     .attr('x', function (data) {\n        //         // Get sibling to have the len and align the date\n        //         let elementWitdh = this.getBoundingClientRect().width;\n        //         let positionWidth = this.parentNode.querySelector('text.text-position').getBoundingClientRect().width;\n        //         if (scaleLine(convertToTimeStamp(data.startDate)) + positionWidth >= getLineVal('max')) {\n        //             return scaleLine(convertToTimeStamp(data.startDate)) - elementWitdh;\n        //         }\n        //         else {\n        //             return scaleLine(convertToTimeStamp(data.startDate));\n        //         }\n        //     })\n        //     .attr('y', 130)\n        //     .attr('class', 'text-date')\n        //     .style('opacity', 0);\n\n        // data.map(d => {\n        //     let details = d3.select('#timelineChart').append('div').classed('details', true).classed('details-' + d.category.toLowerCase(), true).attr('id', 'details-' + d.id);\n        //     details.append('i').classed('material-icons close-icon', true).text('close');\n        //     details.append('div').classed('title', true).append('span').classed('date text-date date-title', true).text(d.startDate + '-' + d.endDate);\n        //     details.select(' .title').append('span').classed('position-title text-position', true).text(d.name);\n        //     details.append('div').classed('place-name text-place hovered', true).text(d.placeName);\n        //     details.append('div')\n        //         .attr('class', 'text-desc')\n        //         .attr('id', 'descriptionId-' + d.id)\n        //         .text(function () {\n        //             if (typeof (d.description) === 'string') {\n        //                 return d.description;\n        //             }\n        //             else {\n        //                 return d.description.toString()\n        //             }\n        //         });\n        //     details.style('opacity', 0);\n        // });\n\n        // Hide the details div (once opened by clicking on circle)\n\n        // close-icon onclick functionality has been muted as per required data-layout\n        // d3.selectAll('.close-icon').on('click', function () {\n        //     d3.select(this.parentNode).style('opacity', 0);\n        //     setTimeout(function () {\n        //         svg.attr('height', 500);\n        //         d3.select('.timeline-base').style('opacity', 1)\n        //         d3.selectAll('circle').classed('circle-clicked', false);\n        //         d3.selectAll('circle').style('opacity', 1);\n        //         d3.selectAll('.details').style('display', 'block');\n        //     }, 1000)\n        // })\n    }\n\n    const d3Container = useRef(null);\n\n    return (\n        <svg\n            className=\"d3-timeline-bubble\"\n            width={996}\n            height={444}\n            ref={d3Container}\n        />\n    );\n}\n\nexport default TimelineBubble;"]},"metadata":{},"sourceType":"module"}